



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
  <meta name="robots" content="noindex, nofollow" />

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://opensciencegrid.github.io/docs-itb/compute-element/job-router-recipes/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.1, mkdocs-material-2.9.2">
    
    
      
        <title>Job Router Recipes - OSG Documentation (ITB)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/itb.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#writing-routes-for-htcondor-ce" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://opensciencegrid.github.io/docs-itb/" title="OSG Documentation (ITB)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OSG Documentation (ITB)
              </span>
              <span class="md-header-nav__topic">
                Job Router Recipes
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/opensciencegrid/docs-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    OSG Documentation (ITB)
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/opensciencegrid/docs-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-planning/" title="Site Planning" class="md-nav__link">
      Site Planning
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Compute Element
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Compute Element
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../htcondor-ce-overview/" title="HTCondor-CE Overview" class="md-nav__link">
      HTCondor-CE Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-htcondor-ce/" title="Install HTCondor-CE" class="md-nav__link">
      Install HTCondor-CE
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Job Router Recipes
      </label>
    
    <a href="./" title="Job Router Recipes" class="md-nav__link md-nav__link--active">
      Job Router Recipes
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quirks-and-pitfalls" title="Quirks and Pitfalls" class="md-nav__link">
    Quirks and Pitfalls
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-job-routes-are-constructed" title="How Job Routes are Constructed" class="md-nav__link">
    How Job Routes are Constructed
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job_router_entries" title="JOB_ROUTER_ENTRIES" class="md-nav__link">
    JOB_ROUTER_ENTRIES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job_router_defaults" title="JOB_ROUTER_DEFAULTS" class="md-nav__link">
    JOB_ROUTER_DEFAULTS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generic-routes" title="Generic Routes" class="md-nav__link">
    Generic Routes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-fields" title="Required fields" class="md-nav__link">
    Required fields
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#batch-system" title="Batch system" class="md-nav__link">
    Batch system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#route-name" title="Route name" class="md-nav__link">
    Route name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-multiple-routes" title="Writing multiple routes" class="md-nav__link">
    Writing multiple routes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-comments" title="Writing comments" class="md-nav__link">
    Writing comments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-attributes-for-all-routes" title="Setting attributes for all routes" class="md-nav__link">
    Setting attributes for all routes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtering-jobs-based-on" title="Filtering jobs based on…" class="md-nav__link">
    Filtering jobs based on…
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glidein-queue" title="Glidein queue" class="md-nav__link">
    Glidein queue
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-submitter" title="Job submitter" class="md-nav__link">
    Job submitter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#voms-attribute" title="VOMS attribute" class="md-nav__link">
    VOMS attribute
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-a-default" title="Setting a default…" class="md-nav__link">
    Setting a default…
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maximum-number-of-jobs" title="Maximum number of jobs" class="md-nav__link">
    Maximum number of jobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maximum-memory" title="Maximum memory" class="md-nav__link">
    Maximum memory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#number-of-cores-to-request" title="Number of cores to request" class="md-nav__link">
    Number of cores to request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maximum-walltime" title="Maximum walltime" class="md-nav__link">
    Maximum walltime
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#editing-attributes" title="Editing attributes…" class="md-nav__link">
    Editing attributes…
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#copying-attributes" title="Copying attributes" class="md-nav__link">
    Copying attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-attributes" title="Removing attributes" class="md-nav__link">
    Removing attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-attributes" title="Setting attributes" class="md-nav__link">
    Setting attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-attributes-with-classad-expressions" title="Setting attributes with ClassAd expressions" class="md-nav__link">
    Setting attributes with ClassAd expressions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-the-number-of-jobs" title="Limiting the number of jobs" class="md-nav__link">
    Limiting the number of jobs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#total-jobs" title="Total jobs" class="md-nav__link">
    Total jobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idle-jobs" title="Idle jobs" class="md-nav__link">
    Idle jobs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-routes" title="Debugging routes" class="md-nav__link">
    Debugging routes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes-for-htcondor-batch-systems" title="Routes for HTCondor Batch Systems" class="md-nav__link">
    Routes for HTCondor Batch Systems
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-periodic-hold-release-or-remove" title="Setting periodic hold, release or remove" class="md-nav__link">
    Setting periodic hold, release or remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-routed-job-requirements" title="Setting routed job requirements" class="md-nav__link">
    Setting routed job requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-accounting-groups" title="Setting accounting groups" class="md-nav__link">
    Setting accounting groups
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes-for-non-htcondor-batch-systems" title="Routes for non-HTCondor Batch Systems" class="md-nav__link">
    Routes for non-HTCondor Batch Systems
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-a-default-batch-queue" title="Setting a default batch queue" class="md-nav__link">
    Setting a default batch queue
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-batch-system-directives" title="Setting batch system directives" class="md-nav__link">
    Setting batch system directives
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" title="Reference" class="md-nav__link">
    Reference
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-configurations" title="Example Configurations" class="md-nav__link">
    Example Configurations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aglt2s-job-routes" title="AGLT2's job routes" class="md-nav__link">
    AGLT2's job routes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bnls-job-routes" title="BNL's job routes" class="md-nav__link">
    BNL's job routes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshoot-htcondor-ce/" title="Troubleshooting HTCondor-CE" class="md-nav__link">
      Troubleshooting HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../submit-htcondor-ce/" title="Submitting to HTCondor-CE" class="md-nav__link">
      Submitting to HTCondor-CE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Worker Node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Worker Node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn/" title="Install from RPM" class="md-nav__link">
      Install from RPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-tarball/" title="Install from Tarball" class="md-nav__link">
      Install from Tarball
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-oasis/" title="Install from OASIS" class="md-nav__link">
      Install from OASIS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-cvmfs/" title="Install CVMFS" class="md-nav__link">
      Install CVMFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-singularity/" title="Install Singularity" class="md-nav__link">
      Install Singularity
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      HTTP & CVMFS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        HTTP & CVMFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/frontier-squid/" title="Install Squid HTTP Cache" class="md-nav__link">
      Install Squid HTTP Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/update-oasis/" title="Update OASIS Shared Repo" class="md-nav__link">
      Update OASIS Shared Repo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/external-oasis-repos/" title="Install an OASIS Repo" class="md-nav__link">
      Install an OASIS Repo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      POSIX Storage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        POSIX Storage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/gridftp/" title="Install GridFTP Server" class="md-nav__link">
      Install GridFTP Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/load-balanced-gridftp/" title="Install Load Balanced GridFTP" class="md-nav__link">
      Install Load Balanced GridFTP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      HDFS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        HDFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/hadoop-overview/" title="HDFS Overview" class="md-nav__link">
      HDFS Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/install-hadoop/" title="Install HDFS" class="md-nav__link">
      Install HDFS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      XRootD
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        XRootD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/xrootd-overview/" title="XRootD Overview" class="md-nav__link">
      XRootD Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/install-xrootd/" title="Install XRootD" class="md-nav__link">
      Install XRootD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/install-xroot-client/" title="Using XRootD" class="md-nav__link">
      Using XRootD
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      StashCache
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        StashCache
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/overview/" title="StashCache Overview" class="md-nav__link">
      StashCache Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/install-cache/" title="Intstall Cache" class="md-nav__link">
      Intstall Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data/stashcache/install-origin/" title="Install Origin" class="md-nav__link">
      Install Origin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Security
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/lcmaps-voms-authentication/" title="LCMAPS-VOMS authentication" class="md-nav__link">
      LCMAPS-VOMS authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/" title="Host Certificates" class="md-nav__link">
      Host Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/user-certs/" title="User Certificates" class="md-nav__link">
      User Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/certificate-management/" title="Certificate Management Reference" class="md-nav__link">
      Certificate Management Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Common
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Common
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/ca/" title="CA Certificates" class="md-nav__link">
      CA Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/yum/" title="Yum Repos" class="md-nav__link">
      Yum Repos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/configuration-with-osg-configure/" title="Configuration with OSG-Configure" class="md-nav__link">
      Configuration with OSG-Configure
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Other
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/gsissh/" title="Install GSI-enabled SSH" class="md-nav__link">
      Install GSI-enabled SSH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-gwms-frontend/" title="Install GlideinWMS Frontend" class="md-nav__link">
      Install GlideinWMS Frontend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-cvmfs-stratum1/" title="Install a CVMFS Stratum 1" class="md-nav__link">
      Install a CVMFS Stratum 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/network-performance-toolkit/" title="Install the Network Performance Toolkit" class="md-nav__link">
      Install the Network Performance Toolkit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/troubleshooting-gratia/" title="Troubleshooting Gratia" class="md-nav__link">
      Troubleshooting Gratia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/schedd-filebeats/" title="Install Transfer Log Filebeats" class="md-nav__link">
      Install Transfer Log Filebeats
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Release Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Release Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/notes/" title="Release Note Overview" class="md-nav__link">
      Release Note Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      3.4 Release Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        3.4 Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-15/" title="OSG Release 3.4.15" class="md-nav__link">
      OSG Release 3.4.15
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14-2/" title="OSG Release 3.4.14-2" class="md-nav__link">
      OSG Release 3.4.14-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14/" title="OSG Release 3.4.14" class="md-nav__link">
      OSG Release 3.4.14
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-13/" title="OSG Release 3.4.13" class="md-nav__link">
      OSG Release 3.4.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-3/" title="OSG Release 3.4.12-3" class="md-nav__link">
      OSG Release 3.4.12-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-2/" title="OSG Release 3.4.12-2" class="md-nav__link">
      OSG Release 3.4.12-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12/" title="OSG Release 3.4.12" class="md-nav__link">
      OSG Release 3.4.12
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-11/" title="OSG Release 3.4.11" class="md-nav__link">
      OSG Release 3.4.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-10/" title="OSG Release 3.4.10" class="md-nav__link">
      OSG Release 3.4.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9-2/" title="OSG Release 3.4.9-2" class="md-nav__link">
      OSG Release 3.4.9-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9/" title="OSG Release 3.4.9" class="md-nav__link">
      OSG Release 3.4.9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-8/" title="OSG Release 3.4.8" class="md-nav__link">
      OSG Release 3.4.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-7/" title="OSG Release 3.4.7" class="md-nav__link">
      OSG Release 3.4.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6-2/" title="OSG Release 3.4.6-2" class="md-nav__link">
      OSG Release 3.4.6-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6/" title="OSG Release 3.4.6" class="md-nav__link">
      OSG Release 3.4.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-4/" title="OSG Release 3.4.5-4" class="md-nav__link">
      OSG Release 3.4.5-4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-3/" title="OSG Release 3.4.5-3" class="md-nav__link">
      OSG Release 3.4.5-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-2/" title="OSG Release 3.4.5-2" class="md-nav__link">
      OSG Release 3.4.5-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5/" title="OSG Release 3.4.5" class="md-nav__link">
      OSG Release 3.4.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-3/" title="OSG Release 3.4.4-3" class="md-nav__link">
      OSG Release 3.4.4-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-2/" title="OSG Release 3.4.4-2" class="md-nav__link">
      OSG Release 3.4.4-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4/" title="OSG Release 3.4.4" class="md-nav__link">
      OSG Release 3.4.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-3/" title="OSG Release 3.4.3" class="md-nav__link">
      OSG Release 3.4.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2-2/" title="OSG Release 3.4.2-2" class="md-nav__link">
      OSG Release 3.4.2-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2/" title="OSG Release 3.4.2" class="md-nav__link">
      OSG Release 3.4.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1-2/" title="OSG Release 3.4.1-2" class="md-nav__link">
      OSG Release 3.4.1-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1/" title="OSG Release 3.4.1" class="md-nav__link">
      OSG Release 3.4.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0-2/" title="OSG Release 3.4.0-2" class="md-nav__link">
      OSG Release 3.4.0-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0/" title="OSG Release 3.4.0" class="md-nav__link">
      OSG Release 3.4.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/release_series/" title="OSG Release Series" class="md-nav__link">
      OSG Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/supported_platforms/" title="Supported Platforms" class="md-nav__link">
      Supported Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-osg-upcoming-software/" title="OSG upcoming software" class="md-nav__link">
      OSG upcoming software
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/yum-basics/" title="Yum Basics" class="md-nav__link">
      Yum Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/signing/" title="RPM Signing" class="md-nav__link">
      RPM Signing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/contrib/" title="Contrib Software" class="md-nav__link">
      Contrib Software
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Monitoring
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Monitoring
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv/" title="Install RSV" class="md-nav__link">
      Install RSV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/advanced-rsv-configuration/" title="Advanced RSV Configuration" class="md-nav__link">
      Advanced RSV Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/rsv-control/" title="Manage RSV via rsv-control" class="md-nav__link">
      Manage RSV via rsv-control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv-gwms-tester/" title="RSV GlideinWMS Tester" class="md-nav__link">
      RSV GlideinWMS Tester
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../common/help/" title="Get Help" class="md-nav__link">
      Get Help
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quirks-and-pitfalls" title="Quirks and Pitfalls" class="md-nav__link">
    Quirks and Pitfalls
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-job-routes-are-constructed" title="How Job Routes are Constructed" class="md-nav__link">
    How Job Routes are Constructed
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job_router_entries" title="JOB_ROUTER_ENTRIES" class="md-nav__link">
    JOB_ROUTER_ENTRIES
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job_router_defaults" title="JOB_ROUTER_DEFAULTS" class="md-nav__link">
    JOB_ROUTER_DEFAULTS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generic-routes" title="Generic Routes" class="md-nav__link">
    Generic Routes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-fields" title="Required fields" class="md-nav__link">
    Required fields
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#batch-system" title="Batch system" class="md-nav__link">
    Batch system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#route-name" title="Route name" class="md-nav__link">
    Route name
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-multiple-routes" title="Writing multiple routes" class="md-nav__link">
    Writing multiple routes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-comments" title="Writing comments" class="md-nav__link">
    Writing comments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-attributes-for-all-routes" title="Setting attributes for all routes" class="md-nav__link">
    Setting attributes for all routes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtering-jobs-based-on" title="Filtering jobs based on…" class="md-nav__link">
    Filtering jobs based on…
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glidein-queue" title="Glidein queue" class="md-nav__link">
    Glidein queue
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-submitter" title="Job submitter" class="md-nav__link">
    Job submitter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#voms-attribute" title="VOMS attribute" class="md-nav__link">
    VOMS attribute
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-a-default" title="Setting a default…" class="md-nav__link">
    Setting a default…
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#maximum-number-of-jobs" title="Maximum number of jobs" class="md-nav__link">
    Maximum number of jobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maximum-memory" title="Maximum memory" class="md-nav__link">
    Maximum memory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#number-of-cores-to-request" title="Number of cores to request" class="md-nav__link">
    Number of cores to request
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maximum-walltime" title="Maximum walltime" class="md-nav__link">
    Maximum walltime
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#editing-attributes" title="Editing attributes…" class="md-nav__link">
    Editing attributes…
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#copying-attributes" title="Copying attributes" class="md-nav__link">
    Copying attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-attributes" title="Removing attributes" class="md-nav__link">
    Removing attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-attributes" title="Setting attributes" class="md-nav__link">
    Setting attributes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-attributes-with-classad-expressions" title="Setting attributes with ClassAd expressions" class="md-nav__link">
    Setting attributes with ClassAd expressions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limiting-the-number-of-jobs" title="Limiting the number of jobs" class="md-nav__link">
    Limiting the number of jobs
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#total-jobs" title="Total jobs" class="md-nav__link">
    Total jobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#idle-jobs" title="Idle jobs" class="md-nav__link">
    Idle jobs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-routes" title="Debugging routes" class="md-nav__link">
    Debugging routes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes-for-htcondor-batch-systems" title="Routes for HTCondor Batch Systems" class="md-nav__link">
    Routes for HTCondor Batch Systems
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-periodic-hold-release-or-remove" title="Setting periodic hold, release or remove" class="md-nav__link">
    Setting periodic hold, release or remove
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-routed-job-requirements" title="Setting routed job requirements" class="md-nav__link">
    Setting routed job requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-accounting-groups" title="Setting accounting groups" class="md-nav__link">
    Setting accounting groups
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#routes-for-non-htcondor-batch-systems" title="Routes for non-HTCondor Batch Systems" class="md-nav__link">
    Routes for non-HTCondor Batch Systems
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-a-default-batch-queue" title="Setting a default batch queue" class="md-nav__link">
    Setting a default batch queue
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-batch-system-directives" title="Setting batch system directives" class="md-nav__link">
    Setting batch system directives
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" title="Reference" class="md-nav__link">
    Reference
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-configurations" title="Example Configurations" class="md-nav__link">
    Example Configurations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aglt2s-job-routes" title="AGLT2's job routes" class="md-nav__link">
    AGLT2's job routes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bnls-job-routes" title="BNL's job routes" class="md-nav__link">
    BNL's job routes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/docs-itb/edit/master/docs/compute-element/job-router-recipes.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="writing-routes-for-htcondor-ce">Writing Routes For HTCondor-CE<a class="headerlink" href="#writing-routes-for-htcondor-ce" title="Permanent link">&para;</a></h1>
<p>The <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/5_4HTCondor_Job.html">JobRouter</a> is at the heart of HTCondor-CE and allows admins to transform and direct jobs to specific batch systems. Customizations are made in the form of job routes where each route corresponds to a separate job transformation: If an incoming job matches a job route's requirements, the route creates a transformed job (referred to as the 'routed job') that is then submitted to the batch system. The CE package comes with default routes located in <code>/etc/condor-ce/config.d/02-ce-*.conf</code> that provide enough basic functionality for a small site.</p>
<p>If you have needs beyond delegating all incoming jobs to your batch system as they are, this document provides examples of common job routes and job route problems.</p>
<div class="admonition note">
<p class="admonition-title">Definitions</p>
<ul>
<li>
<p><strong>Incoming Job</strong>: A job which was submitted to the CE from an outside source, such as a GlideinWMS Factory.</p>
</li>
<li>
<p><strong>Routed Job</strong>: A job which was transformed by the JobRouter.</p>
</li>
<li>
<p><strong>Batch System</strong>: The underlying batch system that the HTCondor-CE will submit.  This can be Slurm, PBS, HTCondor, SGE, LSF,...</p>
</li>
</ul>
</div>
<h2 id="quirks-and-pitfalls">Quirks and Pitfalls<a class="headerlink" href="#quirks-and-pitfalls" title="Permanent link">&para;</a></h2>
<ul>
<li>The JobRouter matches jobs to routes in a round-robin fashion (for HTCondor versions &lt; 8.7.1). This means that if a job can match to multiple routes, it can be routed by any of them! So when writing job routes, make sure that they are exclusive to each other and that your jobs can only match to a single route.</li>
<li>If a value is set in <a href="#job_router_defaults">JOB_ROUTER_DEFAULTS</a> with <code>eval_set_&lt;variable&gt;</code>, override it by using <code>eval_set_&lt;variable&gt;</code> in the <code>JOB_ROUTER_ENTRIES</code>. Do this at your own risk as it may cause the CE to break.</li>
<li>Make sure to run <code>condor_ce_reconfig</code> after changing your routes, otherwise they will not take effect.</li>
<li>Before the last square bracket, make sure all lines end in a line continuation character (backslash). You can inspect the syntax of your routes with <code>condor_ce_config_val JOB_ROUTER_ENTRIES</code> to see if HTCondor-CE has ingested them properly.</li>
<li>Do <strong>not</strong> set the job environment through the JobRouter. Instead, add any changes to the <code>[Local Settings]</code> section in <code>/etc/osg/config.d/40-localsettings.ini</code> and run osg-configure, as documented <a href="../../other/configuration-with-osg-configure#local-settings">here</a>.</li>
<li>HTCondor batch system only: Local universe jobs are excluded from any routing.</li>
</ul>
<h2 id="how-job-routes-are-constructed">How Job Routes are Constructed<a class="headerlink" href="#how-job-routes-are-constructed" title="Permanent link">&para;</a></h2>
<p>Each job route’s <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/4_1HTCondor_s_ClassAd.html">ClassAd</a> is constructed by combining each entry from the <code>JOB_ROUTER_ENTRIES</code> with the <code>JOB_ROUTER_DEFAULTS</code>. Attributes that are <a href="#setting-attributes">set_*</a> in <code>JOB_ROUTER_ENTRIES</code> will override those <a href="#setting-attributes">set_*</a> in <code>JOB_ROUTER_DEFAULTS</code></p>
<h3 id="job_router_entries">JOB_ROUTER_ENTRIES<a class="headerlink" href="#job_router_entries" title="Permanent link">&para;</a></h3>
<p><code>JOB_ROUTER_ENTRIES</code> is a configuration variable whose default is set in <code>/etc/condor-ce/config.d/02-ce-*.conf</code> but may be overriden by the administrator in <code>/etc/condor-ce/config.d/99-local.conf</code>. This document outlines the many changes you can make to <code>JOB_ROUTER_ENTRIES</code> to fit your site’s needs.</p>
<h3 id="job_router_defaults">JOB_ROUTER_DEFAULTS<a class="headerlink" href="#job_router_defaults" title="Permanent link">&para;</a></h3>
<p><code>JOB_ROUTER_DEFAULTS</code> is a python-generated configuration variable that sets default job route values that are required for the HTCondor-CE's functionality. To view its contents in a readable format, run the following command:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@host $</span> condor_ce_config_val JOB_ROUTER_DEFAULTS <span class="p">|</span> sed <span class="s1">&#39;s/;/;\n/g&#39;</span>
</pre></div>


<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If a value is set in <a href="#job_router_defaults">JOB_ROUTER_DEFAULTS</a> with <code>eval_set_&lt;variable&gt;</code>, override it by using <code>eval_set_&lt;variable&gt;</code> in the <code>JOB_ROUTER_ENTRIES</code>. Do this at your own risk as it may cause the CE to break.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do <strong>not</strong> set the <code>JOB_ROUTER_DEFAULTS</code> configuration variable yourself. This will cause the CE to stop functioning.</p>
</div>
<h2 id="generic-routes">Generic Routes<a class="headerlink" href="#generic-routes" title="Permanent link">&para;</a></h2>
<p>This section contains general information about job routes that can be used regardless of the type of batch system at your site. New routes should be placed in <code>/etc/condor-ce/config.d/99-local.conf</code>, not the original <code>02-ce-*.conf</code>.</p>
<h3 id="required-fields">Required fields<a class="headerlink" href="#required-fields" title="Permanent link">&para;</a></h3>
<p>The minimum requirements for a route are that you specify the type of batch system that jobs should be routed to and a name for each route. Default routes can be found in <code>/usr/share/condor-ce/config.d/02-ce-&lt;batch system&gt;-defaults.conf</code>, provided by the <code>osg-ce-&lt;batch system&gt;</code> packages.</p>
<h4 id="batch-system">Batch system<a class="headerlink" href="#batch-system" title="Permanent link">&para;</a></h4>
<p>Each route needs to indicate the type of batch system that jobs should be routed to. For HTCondor batch systems, the <code>TargetUniverse</code> attribute needs to be set to <code>5</code> or <code>"vanilla"</code>. For all other batch systems, the <code>TargetUniverse</code> attribute needs to be set to <code>9</code> or <code>"grid"</code> and the <code>GridResource</code> attribute needs to be set to <code>"batch &lt;batch system&gt;"</code> (where <code>&lt;batch system&gt;</code> can be one of <code>pbs</code>, <code>slurm</code>, <code>lsf</code>, or <code>sge</code>).</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     <span style="color:red">TargetUniverse = 5; \</span>
     name = &quot;Route jobs to HTCondor&quot;; \
] \
[ \
     <span style="color:red">GridResource = &quot;batch pbs&quot;; \</span>
     <span style="color:red">TargetUniverse = 9; \</span>
     name = &quot;Route jobs to PBS&quot;; \
]
</pre></div>


<h4 id="route-name">Route name<a class="headerlink" href="#route-name" title="Permanent link">&para;</a></h4>
<p>To identify routes, you will need to assign a name to the route with the <code>name</code> attribute:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     <span style="color:red">name = &quot;Route jobs to HTCondor&quot;; \</span>
]
</pre></div>


<p>The name of the route will be useful in debugging since it shows up in the output of <a href="../../compute-element/troubleshoot-htcondor-ce#condor_ce_job_router_info">condor_ce_job_router_info</a>, the <a href="../../compute-element/troubleshoot-htcondor-ce#jobrouterlog">JobRouterLog</a>, and in the ClassAd of the routed job, which can be viewed with <a href="../../compute-element/troubleshoot-htcondor-ce#condor_ce_q">condor_ce_q</a> or <a href="../../compute-element/troubleshoot-htcondor-ce#condor_ce_history">condor_ce_history</a>.</p>
<h3 id="writing-multiple-routes">Writing multiple routes<a class="headerlink" href="#writing-multiple-routes" title="Permanent link">&para;</a></h3>
<p>If your batch system needs incoming jobs to be sorted (e.g. if different VO's need to go to separate queues), you will need to write multiple job routes. Each route is enclosed by square brackets and unless they're the last closing bracket, they need to be followed by the line continuation character. The following routes takes incoming jobs that have a <code>queue</code> attribute set to <code>"analy"</code> and routes them to the site's HTCondor batch system. Any other jobs will be sent to that site's PBS batch system.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For versions of HTCondor &lt; 8.7.1, the JobRouter matches jobs to routes in a round-robin fashion. This means that if a job can match to multiple routes, it can be routed by any of them! So when writing job routes, make sure that they are exclusive to each other and that your jobs can only match to a single route.</p>
</div>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = <span style="color:red">[ \</span>
     TargetUniverse = 5; \
     name = &quot;Route jobs to HTCondor&quot;; \
     Requirements = (TARGET.queue =?= &quot;analy&quot;); \
<span style="color:red">] \
[ \</span>
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Route jobs to PBS&quot;; \
     Requirements = (TARGET.queue =!= &quot;analy&quot;); \
<span style="color:red">]</span>
</pre></div>


<h3 id="writing-comments">Writing comments<a class="headerlink" href="#writing-comments" title="Permanent link">&para;</a></h3>
<p>To write comments you can use C-style comments, text enclosed by <code>/* */</code>. If the comment is at the end of a line, it still has to be followed by the line continuation character.</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     name = &quot;C-style comments&quot;; \
     <span style="color:red">/* This is a comment */ \</span>
]
</pre></div>


<p>You can also use <code>#</code> to comment out single lines:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     name = &quot;Hash comments&quot;; \
     <span style="color:red"># BrokenAttribute = &quot;commented out&quot;; \</span>
]
</pre></div>


<h3 id="setting-attributes-for-all-routes">Setting attributes for all routes<a class="headerlink" href="#setting-attributes-for-all-routes" title="Permanent link">&para;</a></h3>
<p>To set an attribute that will be applied to all routes, you will need to ensure that <code>MERGE_JOB_ROUTER_DEFAULT_ADS</code> is set to <code>True</code> (check the value with <a href="../troubleshoot-htcondor-ce#condor_ce_config_val">condor_ce_config_val</a>) and use the <a href="#setting-attributes">set_</a> function in the <code>JOB_ROUTER_DEFAULTS</code>. The following configuration sets the <code>Periodic_Hold</code> attribute for all routes:</p>
<div class="codehilite"><pre><span></span><span class="c"># Use the defaults generated by the condor_ce_router_defaults script.  To add</span>
<span class="c"># additional defaults, add additional lines of the form:</span>
<span class="c">#</span>
<span class="c">#   JOB_ROUTER_DEFAULTS = $(JOB_ROUTER_DEFAULTS) [set_foo = 1;]</span>
<span class="c">#</span>
<span class="nv">MERGE_JOB_ROUTER_DEFAULT_ADS</span><span class="o">=</span>True
<span class="nv">JOB_ROUTER_DEFAULTS</span> <span class="o">=</span> <span class="k">$(</span>JOB_ROUTER_DEFAULTS<span class="k">)</span> <span style="color:red"><span class="o">[</span><span class="nv">set_Periodic_Hold</span> <span class="o">=</span> <span class="o">(</span>NumJobStarts &gt;<span class="o">=</span> <span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nv">JobStatus</span> <span class="o">==</span> <span class="m">1</span><span class="o">)</span> <span class="o">||</span> NumJobStarts &gt; <span class="m">1</span><span class="p">;</span><span class="o">]</span></span>
</pre></div>


<h3 id="filtering-jobs-based-on">Filtering jobs based on…<a class="headerlink" href="#filtering-jobs-based-on" title="Permanent link">&para;</a></h3>
<p>To filter jobs, use the <code>Requirements</code> attribute. Jobs will evaluate against the ClassAd expression set in the <code>Requirements</code> and if the expression evaluates to <code>TRUE</code>, the route will match. More information on the syntax of ClassAd's can be found in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/4_1HTCondor_s_ClassAd.html">HTCondor manual</a>. For an example on how incoming jobs interact with filtering in job routes, consult <a href="../../compute-element/submit-htcondor-ce">this document</a>.</p>
<p>When setting requirements, you need to prefix job attributes that you are filtering with <code>TARGET.</code> so that the job route knows to compare the attribute of the incoming job rather than the route’s own attribute. For example, if an incoming job has a <code>queue = "analy"</code> attribute, then the following job route will not match:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     name = &quot;Filtering by queue&quot;; \
     queue = &quot;not-analy&quot;; \
     <span style="color:red">Requirements = (queue =?= &quot;analy&quot;); \</span>
]
</pre></div>


<p>This is because when evaluating the route requirement, the job route will compare its own <code>queue</code> attribute to "analy" and see that it does not match. You can read more about comparing two ClassAds in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/4_1HTCondor_s_ClassAd.html#SECTION00513300000000000000">HTCondor manual</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have an HTCondor batch system, note the difference with <a href="#setting-routed-job-requirements">set_requirements</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note<p>For versions of HTCondor &lt; 8.7.1, the JobRouter matches jobs to routes in a round-robin fashion. This means that if a job can match to multiple routes, it can be routed by any of them! So when writing job routes, make sure that they are exclusive to each other and that your jobs can only match to a single route.</p>
</p>
</div>
<h4 id="glidein-queue">Glidein queue<a class="headerlink" href="#glidein-queue" title="Permanent link">&para;</a></h4>
<p>To filter jobs based on their glidein queue attribute, your routes will need a <code>Requirements</code> expression using the incoming job's <code>queue</code> attribute. The following entry routes jobs to PBS if the incoming job (specified by <code>TARGET</code>) is an <code>analy</code> (Analysis) glidein:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     name = &quot;Filtering by queue&quot;; \
     <span style="color:red">Requirements = (TARGET.queue =?= &quot;analy&quot;); \</span>
]
</pre></div>


<h4 id="job-submitter">Job submitter<a class="headerlink" href="#job-submitter" title="Permanent link">&para;</a></h4>
<p>To filter jobs based on who submitted it, your routes will need a <code>Requirements</code> expression using the incoming job's <code>Owner</code> attribute. The following entry routes jobs to the HTCondor batch system if the submitter is <code>usatlas2</code>:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     name = &quot;Filtering by job submitter&quot;; \
     <span style="color:red">Requirements = (TARGET.Owner =?= &quot;usatlas2&quot;); \</span>
]
</pre></div>


<p>Alternatively, you can match based on regular expression. The following entry routes jobs to the PBS batch system if the submitter's name begins with <code>usatlas</code>:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Filtering by job submitter (regular expression)&quot;; \
     <span style="color:red">Requirements = regexp(&quot;^usatlas&quot;, TARGET.Owner); \</span>
]
</pre></div>


<h4 id="voms-attribute">VOMS attribute<a class="headerlink" href="#voms-attribute" title="Permanent link">&para;</a></h4>
<p>To filter jobs based on the subject of the job's proxy, your routes will need a <code>Requirements</code> expression using the incoming job's <code>x509UserProxyFirstFQAN</code> attribute. The following entry routes jobs to the PBS batch system if the proxy subject contains <code>/cms/Role=Pilot</code>:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Filtering by VOMS attribute (regex)&quot;; \
     <span style="color:red">Requirements = regexp(&quot;\/cms\/Role\=pilot&quot;, TARGET.x509UserProxyFirstFQAN); \</span>
]
</pre></div>


<h3 id="setting-a-default">Setting a default…<a class="headerlink" href="#setting-a-default" title="Permanent link">&para;</a></h3>
<p>This section outlines how to set default job limits, memory, cores, queue, and maximum walltime. For an example on how users can override these defaults, consult <a href="../submit-htcondor-ce#route-defaults">this document</a>.</p>
<h4 id="maximum-number-of-jobs">Maximum number of jobs<a class="headerlink" href="#maximum-number-of-jobs" title="Permanent link">&para;</a></h4>
<p>To set a default limit to the maximum number of jobs per route, you can edit the configuration variable <code>CONDORCE_MAX_JOBS</code> in <code>/etc/condor-ce/config.d/01-ce-router.conf</code>:</p>
<div class="codehilite"><pre><span></span>CONDORCE_MAX_JOBS = 10000
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above configuration is to be placed directly into the HTCondor-CE configuration, not into a job route.</p>
</div>
<h4 id="maximum-memory">Maximum memory<a class="headerlink" href="#maximum-memory" title="Permanent link">&para;</a></h4>
<p>To set a default maximum memory for routed jobs, set the attribute <code>default_maxMemory</code>:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Request memory&quot;; \
     /* Set the requested memory to 1 GB */ \
     <span style="color:red">set_default_maxMemory = 1000; \</span>
]
</pre></div>


<h4 id="number-of-cores-to-request">Number of cores to request<a class="headerlink" href="#number-of-cores-to-request" title="Permanent link">&para;</a></h4>
<p>To set a default number of cores for routed jobs, set the attribute <code>default_xcount</code>:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Request CPU&quot;; \
     /* Set the requested cores to 8 */ \
     <span style="color:red">set_default_xcount = 8; \</span>
]
</pre></div>


<h4 id="maximum-walltime">Maximum walltime<a class="headerlink" href="#maximum-walltime" title="Permanent link">&para;</a></h4>
<p>To set a default maximum walltime (in minutes) for routed jobs, set the attribute <code>default_maxWallTime</code>:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Setting WallTime&quot;; \
     /* Set the max walltime to 1 hr */ \
     <span style="color:red">set_default_maxWallTime = 60; \</span>
]
</pre></div>


<h3 id="editing-attributes">Editing attributes…<a class="headerlink" href="#editing-attributes" title="Permanent link">&para;</a></h3>
<p>The following functions are operations that affect job attributes and are evaluated in the following order:</p>
<ol>
<li><code>copy_*</code></li>
<li><code>delete_*</code></li>
<li><code>set_*</code></li>
<li><code>eval_set_*</code></li>
</ol>
<p>After each job route’s ClassAd is <a href="#how-job-routes-are-constructed">constructed</a>, the above operations are evaluated in order. For example, if the attribute <code>foo</code> is set using <code>eval_set_foo</code> in the <code>JOB_ROUTER_DEFAULTS</code>, you'll be unable to use <code>delete_foo</code> to remove it from your jobs since the attribute is set using <code>eval_set_foo</code> after the deletion occurs according to the order of operations. To get around this, we can take advantage of the fact that operations defined in <code>JOB_ROUTER_DEFAULTS</code> get overridden by the same operation in <code>JOB_ROUTER_ENTRIES</code>. So to 'delete' <code>foo</code>, we would add <code>eval_set_foo = ""</code> to the route in the <code>JOB_ROUTER_ENTRIES</code>, resulting in <code>foo</code> being absent from the routed job.</p>
<p>More documentation can be found in the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/5_4HTCondor_Job.html#SECTION00644000000000000000">HTCondor manual</a>.</p>
<h4 id="copying-attributes">Copying attributes<a class="headerlink" href="#copying-attributes" title="Permanent link">&para;</a></h4>
<p>To copy the value of an attribute of the incoming job to an attribute of the routed job, use <code>copy_</code>. The following route copies the <code>environment</code> attribute of the incoming job and sets the attribute <code>Original_Environment</code> on the routed job to the same value:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Copying attributes&quot;; \
     <span style="color:red">copy_environment = &quot;Original_Environment&quot;; \</span>
]
</pre></div>


<h4 id="removing-attributes">Removing attributes<a class="headerlink" href="#removing-attributes" title="Permanent link">&para;</a></h4>
<p>To remove an attribute of the incoming job from the routed job, use <code>delete_</code>. The following route removes the <code>environment</code> attribute from the routed job:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Copying attributes&quot;; \
     <span style="color:red">delete_environment = True; \</span>
]
</pre></div>


<h4 id="setting-attributes">Setting attributes<a class="headerlink" href="#setting-attributes" title="Permanent link">&para;</a></h4>
<p>To set an attribute on the routed job, use <code>set_</code>. The following route sets the Job's <code>Rank</code> attribute to 5:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Setting an attribute&quot;; \
     <span style="color:red">set_Rank = 5; \</span>
]
</pre></div>


<h4 id="setting-attributes-with-classad-expressions">Setting attributes with ClassAd expressions<a class="headerlink" href="#setting-attributes-with-classad-expressions" title="Permanent link">&para;</a></h4>
<p>To set an attribute to a ClassAd expression to be evaluated, use <code>eval_set</code>. The following route sets the <code>Experiment</code> attribute to <code>atlas.osguser</code> if the Owner of the incoming job is <code>osguser</code>:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a value is set in JOB_ROUTER_DEFAULTS with <code>eval_set_&lt;variable&gt;</code>, override it by using <code>eval_set_&lt;variable&gt;</code> in the <code>JOB_ROUTER_ENTRIES</code>.</p>
</div>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Setting an attribute with a !ClassAd expression&quot;; \
     <span style="color:red">eval_set_Experiment = strcat(&quot;atlas.&quot;, Owner); \</span>
]
</pre></div>


<h3 id="limiting-the-number-of-jobs">Limiting the number of jobs<a class="headerlink" href="#limiting-the-number-of-jobs" title="Permanent link">&para;</a></h3>
<p>This section outlines how to limit the number of total or idle jobs in a specific route (i.e., if this limit is reached, jobs will no longer be placed in this route).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using an HTCondor batch system, limiting the number of jobs is not the preferred solution: HTCondor manages fair share on its own via <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/3_6User_Priorities.html">user priorities and group accounting</a>.</p>
</div>
<h4 id="total-jobs">Total jobs<a class="headerlink" href="#total-jobs" title="Permanent link">&para;</a></h4>
<p>To set a limit on the number of jobs for a specific route, set the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/5_4HTCondor_Job.html#57134">MaxJobs</a> attribute:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Limit the total number of jobs to 100&quot;; \
     <span style="color:red">MaxJobs = 100; \</span>
] \
[ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Limit the total number of jobs to 75&quot;; \
     <span style="color:red">MaxJobs = 75; \</span>
]
</pre></div>


<h4 id="idle-jobs">Idle jobs<a class="headerlink" href="#idle-jobs" title="Permanent link">&para;</a></h4>
<p>To set a limit on the number of idle jobs for a specific route, set the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/5_4HTCondor_Job.html#57135">MaxIdleJobs</a> attribute:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     name = &quot;Limit the total number of idle jobs to 100&quot;; \
     <span style="color:red">MaxIdleJobs = 100; \</span>
] \
[ \
     TargetUniverse = 5; \
     name = &quot;Limit the total number of idle jobs to 75&quot;; \
     <span style="color:red">MaxIdleJobs = 75; \</span>
]
</pre></div>


<h3 id="debugging-routes">Debugging routes<a class="headerlink" href="#debugging-routes" title="Permanent link">&para;</a></h3>
<p>To help debug expressions in your routes, you can use the <code>debug()</code> function. First, set the debug mode for the JobRouter by editing a file in <code>/etc/condor-ce/config.d/</code> to read</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_DEBUG = D_FULLDEBUG
</pre></div>


<p>Then wrap the problematic attribute in <code>debug()</code>:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Debugging a difficult !ClassAd expression&quot;; \
     <span style="color:red">eval_set_Experiment = debug(strcat(&quot;atlas&quot;, Name)); \</span>
]
</pre></div>


<p>You will find the debugging output in <code>/var/log/condor-ce/JobRouterLog</code>.</p>
<h2 id="routes-for-htcondor-batch-systems">Routes for HTCondor Batch Systems<a class="headerlink" href="#routes-for-htcondor-batch-systems" title="Permanent link">&para;</a></h2>
<p>This section contains information about job routes that can be used if you are running an HTCondor batch system at your site.</p>
<h3 id="setting-periodic-hold-release-or-remove">Setting periodic hold, release or remove<a class="headerlink" href="#setting-periodic-hold-release-or-remove" title="Permanent link">&para;</a></h3>
<p>To release, remove or put a job on hold if it meets certain criteria, use the <code>PERIODIC_*</code> family of attributes. By default, periodic expressions are evaluated once every 300 seconds but this can be changed by setting <code>PERIODIC_EXPR_INTERVAL</code> in your CE's configuration.</p>
<p>In this example, we set the routed job on hold if the job is idle and has been started at least once or if the job has tried to start more than once.  This will catch jobs which are starting and stopping multiple times.</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     name = &quot;Setting periodic statements&quot;; \
     <span style="color:red">/* Puts the routed job on hold if the job&#39;s been idle and has been started at least once or if the job has tried to start more than once */ \
     set_Periodic_Hold = (NumJobStarts &gt;= 1 &amp;&amp; JobStatus == 1) || NumJobStarts &gt; 1; \
     /* Remove routed jobs if their walltime is longer than 3 days and 5 minutes */ \
     set_Periodic_Remove = ( RemoteWallClockTime &gt; (3*24*60*60 + 5*60) ); \
     /* Release routed jobs if the condor_starter couldn&#39;t start the executable and &#39;VMGAHP_ERR_INTERNAL&#39; is in the HoldReason */ \
     set_Periodic_Release = HoldReasonCode == 6 &amp;&amp; regexp(&quot;VMGAHP_ERR_INTERNAL&quot;, HoldReason); \</span>
]
</pre></div>


<h3 id="setting-routed-job-requirements">Setting routed job requirements<a class="headerlink" href="#setting-routed-job-requirements" title="Permanent link">&para;</a></h3>
<p>If you need to set requirements on your routed job, you will need to use <code>set_Requirements</code> instead of <code>Requirements</code>. The <code>Requirements</code> attribute filters jobs coming into your CE into different job routes whereas <code>set_Requirements</code> will set conditions on the routed job that must be met by the worker node it lands on. For more information on requirements, consult the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/2_5Submitting_Job.html#SECTION00357000000000000000">HTCondor manual</a>.</p>
<p>To ensure that your job lands on a Linux machine in your pool:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     TargetUniverse = 5; \
     <span style="color:red">set_Requirements =  OpSys == &quot;LINUX&quot;; \</span>
]
</pre></div>


<h3 id="setting-accounting-groups">Setting accounting groups<a class="headerlink" href="#setting-accounting-groups" title="Permanent link">&para;</a></h3>
<p>To assign jobs to an HTCondor accounting group to manage fair share on your local batch system, we recommend using <a href="../../compute-element/install-htcondor-ce#htcondor-accounting-groups">UID and ExtAttr tables</a>.</p>
<h2 id="routes-for-non-htcondor-batch-systems">Routes for non-HTCondor Batch Systems<a class="headerlink" href="#routes-for-non-htcondor-batch-systems" title="Permanent link">&para;</a></h2>
<p>This section contains information about job routes that can be used if you are running a non-HTCondor batch system at your site.</p>
<h3 id="setting-a-default-batch-queue">Setting a default batch queue<a class="headerlink" href="#setting-a-default-batch-queue" title="Permanent link">&para;</a></h3>
<p>To set a default queue for routed jobs, set the attribute <code>default_queue</code>:</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Setting batch system queues&quot;; \
     <span style="color:red">set_default_queue = &quot;osg_queue&quot;; \</span>
]
</pre></div>


<h3 id="setting-batch-system-directives">Setting batch system directives<a class="headerlink" href="#setting-batch-system-directives" title="Permanent link">&para;</a></h3>
<p>To write batch system directives that are not supported in the route examples above, you will need to edit the job submit script for your local batch system in <code>/etc/blahp/</code> (e.g., if your local batch system is PBS, edit <code>/etc/blahp/pbs_local_submit_attributes.sh</code>). This file is sourced during submit time and anything printed to stdout is appended to the batch system job submit script. ClassAd attributes can be passed from the routed job to the local submit attributes script via the <code>default_remote_cerequirements</code> attribute, which can take the following form:</p>
<div class="codehilite"><pre><span></span>default_remote_cerequirements = &quot;foo == X &amp;&amp; bar == \&quot;Y\&quot; &amp;&amp; ...&quot;
</pre></div>


<p>This sets <code>foo</code> to value <code>X</code> and <code>bar</code> to the string <code>Y</code> (escaped double-quotes are required for string values) in the environment of the local submit attributes script. The following example sets the maximum walltime to 1 hour and the accounting group to the <code>x509UserProxyFirstFQAN</code> attribute of the job submitted to a PBS batch system</p>
<div class="codehilite"><pre><span></span>JOB_ROUTER_ENTRIES = [ \
     GridResource = &quot;batch pbs&quot;; \
     TargetUniverse = 9; \
     name = &quot;Setting job submit variables&quot;; \
     <span style="color:red">set_default_remote_cerequirements = strcat(&quot;Walltime == 3600 &amp;&amp; AccountingGroup == \&quot;&quot;, x509UserProxyFirstFQAN, &quot;\&quot;&quot;); \</span>
]
</pre></div>


<p>With <code>/etc/blahp/pbs_local_submit_attributes.sh</code> containing.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">echo</span> <span class="s2">&quot;#PBS -l walltime=</span><span class="nv">$Walltime</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;#PBS -A </span><span class="nv">$AccountingGroup</span><span class="s2">&quot;</span>
</pre></div>
</td></tr></table>

<p>This results in the following being appended to the script that gets submitted to your batch system:</p>
<div class="codehilite"><pre><span></span>#PBS -l walltime=3600
#PBS -A <span style="color:red">&lt;CE job&#39;s x509UserProxyFirstFQAN attribute&gt;</span>
</pre></div>


<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h2>
<p>Here are some other HTCondor-CE documents that might be helpful:</p>
<ul>
<li><a href="../htcondor-ce-overview">HTCondor-CE overview and architecture</a></li>
<li><a href="../install-htcondor-ce">Installing HTCondor-CE</a></li>
<li><a href="../troubleshoot-htcondor-ce">The HTCondor-CE troubleshooting guide</a></li>
<li><a href="../submit-htcondor-ce">Submitting jobs to HTCondor-CE</a></li>
</ul>
<h3 id="example-configurations">Example Configurations<a class="headerlink" href="#example-configurations" title="Permanent link">&para;</a></h3>
<h4 id="aglt2s-job-routes">AGLT2's job routes<a class="headerlink" href="#aglt2s-job-routes" title="Permanent link">&para;</a></h4>
<p>Atlas AGLT2 is using an HTCondor batch system. Here are some things to note about their routes.</p>
<ul>
<li>Setting various HTCondor-specific attributes like <code>Rank</code>, <code>AccountingGroup</code>, <code>JobPrio</code> and <code>Periodic_Remove</code> (see the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/12_Appendix_A.html">HTCondor manual</a> for more). Some of these are site-specific like <code>LastandFrac</code>, <code>IdleMP8Pressure</code>, <code>localQue</code>, <code>IsAnalyJob</code> and <code>JobMemoryLimit</code>.</li>
<li>There is a difference between <code>Requirements</code> and <code>set_requirements</code>. The <code>Requirements</code> attribute matches jobs to specific routes while the <code>set_requirements</code> sets the <code>Requirements</code> attribute on the <em>routed</em> job, which confines which machines that the routed job can land on.</li>
</ul>
<p>Source: <a href="https://www.aglt2.org/wiki/bin/view/AGLT2/CondorCE#The_JobRouter_configuration_file_content">https://www.aglt2.org/wiki/bin/view/AGLT2/CondorCE#The_JobRouter_configuration_file_content</a></p>
<div class="codehilite"><pre><span></span><span class="nv">JOB_ROUTER_ENTRIES</span> <span class="o">=</span> <span class="se">\</span>
/* Still to <span class="k">do</span> on all routes, get job requirements and add them here */ <span class="se">\</span>
/* ***** Route no <span class="m">1</span> ***** */ <span class="se">\</span>
/* ***** Analysis queue ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue<span class="o">==</span><span class="s2">&quot;analy&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;Analysis Queue&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_IdleMP8Pressure</span> <span class="o">=</span> <span class="k">$(</span>IdleMP8Pressure<span class="k">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_LastAndFrac</span> <span class="o">=</span> <span class="k">$(</span>LastAndFrac<span class="k">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span>IfThenElse<span class="o">((</span><span class="nv">Owner</span> <span class="o">==</span> <span class="s2">&quot;atlasconnect&quot;</span> <span class="o">||</span> <span class="nv">Owner</span> <span class="o">==</span> <span class="s2">&quot;muoncal&quot;</span><span class="o">)</span>,IfThenElse<span class="o">(</span>IdleMP8Pressure,<span class="o">(</span>TARGET.PARTITIONED <span class="o">=</span>!<span class="o">=</span> TRUE<span class="o">)</span>,True<span class="o">)</span>,IfThenElse<span class="o">(</span>LastAndFrac,<span class="o">(</span>TARGET.PARTITIONED <span class="o">=</span>!<span class="o">=</span> TRUE<span class="o">)</span>,True<span class="o">)))</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;group_gatekpr.prod.analy.&quot;</span>,Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Analysis&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> True<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobPrio</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">2</span> ***** */ <span class="se">\</span>
/* ***** splitterNT queue ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue <span class="o">==</span> <span class="s2">&quot;splitterNT&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;Splitter ntuple queue&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> <span class="s2">&quot;group_calibrate.muoncal&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Splitter&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> False<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobPrio</span> <span class="o">=</span> <span class="m">10</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">3</span> ***** */ <span class="se">\</span>
/* ***** splitter queue ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue <span class="o">==</span> <span class="s2">&quot;splitter&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;Splitter queue&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> <span class="s2">&quot;group_calibrate.muoncal&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Splitter&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> False<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobPrio</span> <span class="o">=</span> <span class="m">15</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">4</span> ***** */ <span class="se">\</span>
/* ***** xrootd queue ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue <span class="o">==</span> <span class="s2">&quot;xrootd&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;Xrootd queue&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;group_gatekpr.prod.analy.&quot;</span>,Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Analysis&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> True<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobPrio</span> <span class="o">=</span> <span class="m">35</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">5</span> ***** */ <span class="se">\</span>
/* ***** Tier3Test queue ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue <span class="o">==</span> <span class="s2">&quot;Tier3Test&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;Tier3 Test Queue&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> <span class="nv">IS_TIER3_TEST_QUEUE</span> <span class="o">=</span>?<span class="o">=</span> True <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;group_gatekpr.prod.analy.&quot;</span>,Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Tier3Test&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsTier3TestJob</span> <span class="o">=</span> True<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> True<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobPrio</span> <span class="o">=</span> <span class="m">20</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">6</span> ***** */ <span class="se">\</span>
/* ***** mp8 queue ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue<span class="o">==</span><span class="s2">&quot;mp8&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;MCORE Queue&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">((</span> TARGET.Cpus <span class="o">==</span> <span class="m">8</span> <span class="o">&amp;&amp;</span> TARGET.CPU_TYPE <span class="o">=</span>?<span class="o">=</span> <span class="s2">&quot;mp8&quot;</span> <span class="o">)</span> <span class="o">||</span> TARGET.PARTITIONED <span class="o">=</span>?<span class="o">=</span> True <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;group_gatekpr.prod.mcore.&quot;</span>,Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;MP8&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> False<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobPrio</span> <span class="o">=</span> <span class="m">25</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="m">0</span>.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_RequestCpus</span> <span class="o">=</span> <span class="m">8</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">33552000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Slot_Type</span> <span class="o">=</span> <span class="s2">&quot;mp8&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">7</span> ***** */ <span class="se">\</span>
/* ***** Installation queue, triggered by usatlas2 user ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue is undefined <span class="o">&amp;&amp;</span> target.Owner <span class="o">==</span> <span class="s2">&quot;usatlas2&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;Install Queue&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.IS_INSTALL_QUE <span class="o">=</span>?<span class="o">=</span> True <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span>TARGET.AGLT2_SITE <span class="o">==</span> <span class="s2">&quot;UM&quot;</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;group_gatekpr.other.&quot;</span>,Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> False<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsInstallJob</span> <span class="o">=</span> True<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobPrio</span> <span class="o">=</span> <span class="m">15</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">8</span> ***** */ <span class="se">\</span>
/* ***** Default queue <span class="k">for</span> usatlas1 user ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue is undefined <span class="o">&amp;&amp;</span> regexp<span class="o">(</span><span class="s2">&quot;usatlas1&quot;</span>,target.Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;ATLAS Production Queue&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;group_gatekpr.prod.prod.&quot;</span>,Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> False<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">9</span> ***** */ <span class="se">\</span>
/* ***** Default queue <span class="k">for</span> any other usatlas account ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue is undefined <span class="o">&amp;&amp;</span> <span class="o">(</span>regexp<span class="o">(</span><span class="s2">&quot;usatlas2&quot;</span>,target.Owner<span class="o">)</span> <span class="o">||</span> regexp<span class="o">(</span><span class="s2">&quot;usatlas3&quot;</span>,target.Owner<span class="o">))</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;Other ATLAS Production&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;group_gatekpr.other.&quot;</span>,Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> False<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span> <span class="se">\</span>
/* ***** Route no <span class="m">10</span> ***** */ <span class="se">\</span>
/* ***** Anything <span class="k">else</span>. Set queue as Default and assign to other VOs  ***** */ <span class="se">\</span>
  <span class="o">[</span> <span class="se">\</span>
    <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot; </span><span class="k">$(</span>JOB_ROUTER_SCHEDD2_POOL<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Requirements</span> <span class="o">=</span> target.queue is undefined <span class="o">&amp;&amp;</span> ifThenElse<span class="o">(</span>regexp<span class="o">(</span><span class="s2">&quot;usatlas&quot;</span>,target.Owner<span class="o">)</span>,false,true<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">Name</span> <span class="o">=</span> <span class="s2">&quot;Other Jobs&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> TARGET.TotalDisk <span class="o">=</span>?<span class="o">=</span> undefined <span class="o">)</span> <span class="o">||</span> <span class="o">(</span> TARGET.TotalDisk &gt;<span class="o">=</span> <span class="m">21000000</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Arch <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">eval_set_AccountingGroup</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;group_VOgener.&quot;</span>,Owner<span class="o">)</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_localQue</span> <span class="o">=</span> <span class="s2">&quot;Default&quot;</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_IsAnalyJob</span> <span class="o">=</span> False<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Rank</span> <span class="o">=</span> <span class="o">(</span>SlotID + <span class="o">(</span><span class="m">64</span>-TARGET.DETECTED_CORES<span class="o">))</span>*1.0<span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_JobMemoryLimit</span> <span class="o">=</span> <span class="m">4194000</span><span class="p">;</span> <span class="se">\</span>
    <span class="nv">set_Periodic_Remove</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> RemoteWallClockTime &gt; <span class="o">(</span><span class="m">3</span>*24*60*60 + <span class="m">5</span>*60<span class="o">)</span> <span class="o">)</span> <span class="o">||</span> <span class="o">(</span>ImageSize &gt; JobMemoryLimit<span class="o">)</span> <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
  <span class="o">]</span>
</pre></div>


<h4 id="bnls-job-routes">BNL's job routes<a class="headerlink" href="#bnls-job-routes" title="Permanent link">&para;</a></h4>
<p>Atlas BNL T1, they are using an HTCondor batch system. Here are some things to note about their routes:</p>
<ul>
<li>Setting various HTCondor-specific attributes like <code>JobLeaseDuration</code>, <code>Requirements</code> and <code>Periodic_Hold</code> (see the <a href="http://research.cs.wisc.edu/htcondor/manual/v8.6/12_Appendix_A.html">HTCondor manual</a> for more). Some of these are site-specific like <code>RACF_Group</code>, <code>Experiment</code>, <code>Job_Type</code> and <code>VO</code>.</li>
<li>Jobs are split into different routes based on the <a href="#glidein-queue">GlideIn</a> queue that they're in.</li>
<li>There is a difference between <code>Requirements</code> and <code>set_requirements</code>. The <code>Requirements</code> attribute matches <em>incoming</em> jobs to specific routes while the <code>set_requirements</code> sets the <code>Requirements</code> attribute on the <em>routed</em> job, which confines which machines that the routed job can land on.</li>
</ul>
<p>Source: <a href="http://www.usatlas.bnl.gov/twiki/bin/view/Admins/HTCondorCE.html">http://www.usatlas.bnl.gov/twiki/bin/view/Admins/HTCondorCE.html</a></p>
<div class="codehilite"><pre><span></span><span class="nv">JOB_ROUTER_ENTRIES</span> <span class="o">=</span> <span class="se">\</span>
   <span class="o">[</span> <span class="se">\</span>
     <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">name</span> <span class="o">=</span> <span class="s2">&quot;BNL_Condor_Pool_long&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">Requirements</span> <span class="o">=</span> target.queue<span class="o">==</span><span class="s2">&quot;analysis.long&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_RACF_Group</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Experiment</span> <span class="o">=</span> <span class="s2">&quot;atlas&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> <span class="nv">Arch</span> <span class="o">==</span> <span class="s2">&quot;INTEL&quot;</span> <span class="o">||</span> <span class="nv">Arch</span> <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> <span class="nv">CPU_Experiment</span> <span class="o">==</span> <span class="s2">&quot;atlas&quot;</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Job_Type</span> <span class="o">=</span> <span class="s2">&quot;cas&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_JobLeaseDuration</span> <span class="o">=</span> <span class="m">3600</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Periodic_Hold</span> <span class="o">=</span> <span class="o">(</span>NumJobStarts &gt;<span class="o">=</span> <span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nv">JobStatus</span> <span class="o">==</span> <span class="m">1</span><span class="o">)</span> <span class="o">||</span> NumJobStarts &gt; <span class="m">1</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_VO</span> <span class="o">=</span> x509UserProxyVOName<span class="p">;</span> <span class="se">\</span>
   <span class="o">]</span> <span class="se">\</span>
   <span class="o">[</span> <span class="se">\</span>
     <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">name</span> <span class="o">=</span> <span class="s2">&quot;BNL_Condor_Pool_short&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">Requirements</span> <span class="o">=</span> target.queue<span class="o">==</span><span class="s2">&quot;analysis.short&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_RACF_Group</span> <span class="o">=</span> <span class="s2">&quot;short&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Experiment</span> <span class="o">=</span> <span class="s2">&quot;atlas&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> <span class="nv">Arch</span> <span class="o">==</span> <span class="s2">&quot;INTEL&quot;</span> <span class="o">||</span> <span class="nv">Arch</span> <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> <span class="nv">CPU_Experiment</span> <span class="o">==</span> <span class="s2">&quot;atlas&quot;</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Job_Type</span> <span class="o">=</span> <span class="s2">&quot;cas&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_JobLeaseDuration</span> <span class="o">=</span> <span class="m">3600</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Periodic_Hold</span> <span class="o">=</span> <span class="o">(</span>NumJobStarts &gt;<span class="o">=</span> <span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nv">JobStatus</span> <span class="o">==</span> <span class="m">1</span><span class="o">)</span> <span class="o">||</span> NumJobStarts &gt; <span class="m">1</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_VO</span> <span class="o">=</span> x509UserProxyVOName<span class="p">;</span> <span class="se">\</span>
   <span class="o">]</span> <span class="se">\</span>
   <span class="o">[</span> <span class="se">\</span>
     <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">name</span> <span class="o">=</span> <span class="s2">&quot;BNL_Condor_Pool_grid&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">Requirements</span> <span class="o">=</span> target.queue<span class="o">==</span><span class="s2">&quot;grid&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_RACF_Group</span> <span class="o">=</span> <span class="s2">&quot;grid&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Experiment</span> <span class="o">=</span> <span class="s2">&quot;atlas&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> <span class="nv">Arch</span> <span class="o">==</span> <span class="s2">&quot;INTEL&quot;</span> <span class="o">||</span> <span class="nv">Arch</span> <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> <span class="nv">CPU_Experiment</span> <span class="o">==</span> <span class="s2">&quot;atlas&quot;</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Job_Type</span> <span class="o">=</span> <span class="s2">&quot;cas&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_JobLeaseDuration</span> <span class="o">=</span> <span class="m">3600</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Periodic_Hold</span> <span class="o">=</span> <span class="o">(</span>NumJobStarts &gt;<span class="o">=</span> <span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nv">JobStatus</span> <span class="o">==</span> <span class="m">1</span><span class="o">)</span> <span class="o">||</span> NumJobStarts &gt; <span class="m">1</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_VO</span> <span class="o">=</span> x509UserProxyVOName<span class="p">;</span> <span class="se">\</span>
   <span class="o">]</span> <span class="se">\</span>
   <span class="o">[</span> <span class="se">\</span>
     <span class="nv">GridResource</span> <span class="o">=</span> <span class="s2">&quot;condor localhost localhost&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_GridResource</span> <span class="o">=</span> strcat<span class="o">(</span><span class="s2">&quot;condor &quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="k">$(</span>FULL_HOSTNAME<span class="k">)</span><span class="s2">&quot;</span><span class="o">)</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">TargetUniverse</span> <span class="o">=</span> <span class="m">5</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">name</span> <span class="o">=</span> <span class="s2">&quot;BNL_Condor_Pool&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">Requirements</span> <span class="o">=</span> target.queue is undefined<span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_RACF_Group</span> <span class="o">=</span> <span class="s2">&quot;grid&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_requirements</span> <span class="o">=</span> <span class="o">(</span> <span class="o">(</span> <span class="nv">Arch</span> <span class="o">==</span> <span class="s2">&quot;INTEL&quot;</span> <span class="o">||</span> <span class="nv">Arch</span> <span class="o">==</span> <span class="s2">&quot;X86_64&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> <span class="nv">CPU_Experiment</span> <span class="o">==</span> <span class="s2">&quot;rcf&quot;</span> <span class="o">)</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.OpSys <span class="o">==</span> <span class="s2">&quot;LINUX&quot;</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Disk &gt;<span class="o">=</span> RequestDisk <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.Memory &gt;<span class="o">=</span> RequestMemory <span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span> TARGET.HasFileTransfer <span class="o">)</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Experiment</span> <span class="o">=</span> <span class="s2">&quot;atlas&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Job_Type</span> <span class="o">=</span> <span class="s2">&quot;cas&quot;</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_JobLeaseDuration</span> <span class="o">=</span> <span class="m">3600</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">set_Periodic_Hold</span> <span class="o">=</span> <span class="o">(</span>NumJobStarts &gt;<span class="o">=</span> <span class="m">1</span> <span class="o">&amp;&amp;</span> <span class="nv">JobStatus</span> <span class="o">==</span> <span class="m">1</span><span class="o">)</span> <span class="o">||</span> NumJobStarts &gt; <span class="m">1</span><span class="p">;</span> <span class="se">\</span>
     <span class="nv">eval_set_VO</span> <span class="o">=</span> x509UserProxyVOName<span class="p">;</span> <span class="se">\</span>
   <span class="o">]</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../install-htcondor-ce/" title="Install HTCondor-CE" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Install HTCondor-CE
              </span>
            </div>
          </a>
        
        
          <a href="../troubleshoot-htcondor-ce/" title="Troubleshooting HTCondor-CE" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Troubleshooting HTCondor-CE
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.1",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>