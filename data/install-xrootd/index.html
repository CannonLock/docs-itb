



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
  <meta name="robots" content="noindex, nofollow" />

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://opensciencegrid.github.io/docs-itb/data/install-xrootd/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.4">
    
    
      
        <title>Install XRootD - OSG Documentation (ITB)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/itb.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#installing-and-maintaining-xrootd" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://opensciencegrid.github.io/docs-itb/" title="OSG Documentation (ITB)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                OSG Documentation (ITB)
              </span>
              <span class="md-header-nav__topic">
                Install XRootD
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/opensciencegrid/docs-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://opensciencegrid.github.io/docs-itb/" title="OSG Documentation (ITB)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    OSG Documentation (ITB)
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/opensciencegrid/docs-itb/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../site-planning/" title="Site Planning" class="md-nav__link">
      Site Planning
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Compute Element
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Compute Element
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/htcondor-ce-overview/" title="HTCondor-CE Overview" class="md-nav__link">
      HTCondor-CE Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/install-htcondor-ce/" title="Install HTCondor-CE" class="md-nav__link">
      Install HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/job-router-recipes/" title="Job Router Recipes" class="md-nav__link">
      Job Router Recipes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/troubleshoot-htcondor-ce/" title="Troubleshooting HTCondor-CE" class="md-nav__link">
      Troubleshooting HTCondor-CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../compute-element/submit-htcondor-ce/" title="Submitting to HTCondor-CE" class="md-nav__link">
      Submitting to HTCondor-CE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Worker Node
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Worker Node
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/using-wn/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn/" title="Install from RPM" class="md-nav__link">
      Install from RPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-tarball/" title="Install from Tarball" class="md-nav__link">
      Install from Tarball
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-wn-oasis/" title="Install from OASIS" class="md-nav__link">
      Install from OASIS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-cvmfs/" title="Install CVMFS" class="md-nav__link">
      Install CVMFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../worker-node/install-singularity/" title="Install Singularity" class="md-nav__link">
      Install Singularity
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      HTTP & CVMFS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        HTTP & CVMFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../frontier-squid/" title="Install Squid HTTP Cache" class="md-nav__link">
      Install Squid HTTP Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../update-oasis/" title="Update OASIS Shared Repo" class="md-nav__link">
      Update OASIS Shared Repo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../external-oasis-repos/" title="Install an OASIS Repo" class="md-nav__link">
      Install an OASIS Repo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      POSIX Storage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        POSIX Storage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gridftp/" title="Install GridFTP Server" class="md-nav__link">
      Install GridFTP Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../load-balanced-gridftp/" title="Install Load Balanced GridFTP" class="md-nav__link">
      Install Load Balanced GridFTP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      HDFS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        HDFS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hadoop-overview/" title="HDFS Overview" class="md-nav__link">
      HDFS Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-hadoop/" title="Install HDFS" class="md-nav__link">
      Install HDFS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4" checked>
    
    <label class="md-nav__link" for="nav-5-4">
      XRootD
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        XRootD
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../xrootd-overview/" title="XRootD Overview" class="md-nav__link">
      XRootD Overview
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Install XRootD
      </label>
    
    <a href="./" title="Install XRootD" class="md-nav__link md-nav__link--active">
      Install XRootD
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" title="Before Starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-an-xrootd-server" title="Installing an XRootD Server" class="md-nav__link">
    Installing an XRootD Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-an-xrootd-server" title="Configuring an XRootD Server" class="md-nav__link">
    Configuring an XRootD Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimal-configuration" title="Minimal configuration" class="md-nav__link">
    Minimal configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-configuration" title="Advanced configuration" class="md-nav__link">
    Advanced configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-xrootd-cluster" title="Creating an XRootD cluster" class="md-nav__link">
    Creating an XRootD cluster
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modify-etcxrootdxrootd-clusteredcfg" title="Modify /etc/xrootd/xrootd-clustered.cfg" class="md-nav__link">
    Modify /etc/xrootd/xrootd-clustered.cfg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-clustered-config" title="Verifying the clustered config" class="md-nav__link">
    Verifying the clustered config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-adding-simple-server-inventory-to-your-cluster" title="(Optional) Adding Simple Server Inventory to your cluster" class="md-nav__link">
    (Optional) Adding Simple Server Inventory to your cluster
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-a-second-instance-of-xrootd-on-el-6" title="Starting a second instance of XRootD on EL 6" class="md-nav__link">
    Starting a second instance of XRootD on EL 6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-a-second-instance-of-xrootd-on-el-7" title="Starting a second instance of XRootD on EL 7" class="md-nav__link">
    Starting a second instance of XRootD on EL 7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-an-xrootd-cluster-with-ssi" title="Testing an XRootD cluster with SSI" class="md-nav__link">
    Testing an XRootD cluster with SSI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-enabling-xrootd-over-http" title="(Optional) Enabling Xrootd over HTTP" class="md-nav__link">
    (Optional) Enabling Xrootd over HTTP
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-enable-http-based-writes" title="(Optional) Enable HTTP based Writes" class="md-nav__link">
    (Optional) Enable HTTP based Writes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-enabling-a-fuse-mount" title="(Optional) Enabling a FUSE mount" class="md-nav__link">
    (Optional) Enabling a FUSE mount
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-authorization" title="(Optional) Authorization" class="md-nav__link">
    (Optional) Authorization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authorization-file" title="Authorization file" class="md-nav__link">
    Authorization file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-option-1-adding-simple-unix-security" title="Security option 1: adding simple (Unix) security" class="md-nav__link">
    Security option 1: adding simple (Unix) security
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-an-xrootd-cluster-with-simple-security-enabled" title="Testing an XRootD cluster with simple security enabled" class="md-nav__link">
    Testing an XRootD cluster with simple security enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-option-2-shared-keys" title="Security option 2: Shared keys" class="md-nav__link">
    Security option 2: Shared keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-option-3-xrootd-lcmaps-authorization" title="Security option 3: xrootd-lcmaps authorization" class="md-nav__link">
    Security option 3: xrootd-lcmaps authorization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-adding-cms-tfc-support-to-xrootd-cms-sites-only" title="(Optional) Adding CMS TFC support to XRootD (CMS sites only)" class="md-nav__link">
    (Optional) Adding CMS TFC support to XRootD (CMS sites only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-adding-hadoop-support-to-xrootd" title="(Optional) Adding Hadoop support to XRootD" class="md-nav__link">
    (Optional) Adding Hadoop support to XRootD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-adding-file-residency-manager-frm-to-an-xrootd-cluster" title="(Optional) Adding File Residency Manager (FRM) to an XRootd cluster" class="md-nav__link">
    (Optional) Adding File Residency Manager (FRM) to an XRootd cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-installing-a-gridftp-server" title="(Optional) Installing a GridFTP Server" class="md-nav__link">
    (Optional) Installing a GridFTP Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-xrootd" title="Using XRootD" class="md-nav__link">
    Using XRootD
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#managing-xrootd-services" title="Managing XRootD services" class="md-nav__link">
    Managing XRootD services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" title="Getting Help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" title="Reference" class="md-nav__link">
    Reference
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-locations" title="File locations" class="md-nav__link">
    File locations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links" title="Links" class="md-nav__link">
    Links
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../install-xroot-client/" title="Using XRootD" class="md-nav__link">
      Using XRootD
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      StashCache
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        StashCache
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/overview/" title="StashCache Overview" class="md-nav__link">
      StashCache Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/install-cache/" title="Install Cache" class="md-nav__link">
      Install Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stashcache/install-origin/" title="Install Origin" class="md-nav__link">
      Install Origin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Security
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/lcmaps-voms-authentication/" title="LCMAPS VOMS authentication" class="md-nav__link">
      LCMAPS VOMS authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/host-certs/" title="Host Certificates" class="md-nav__link">
      Host Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/user-certs/" title="User Certificates" class="md-nav__link">
      User Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../security/certificate-management/" title="Certificate Management Reference" class="md-nav__link">
      Certificate Management Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Common
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Common
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/ca/" title="CA Certificates" class="md-nav__link">
      CA Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/yum/" title="Yum Repos" class="md-nav__link">
      Yum Repos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/configuration-with-osg-configure/" title="Configuration with OSG-Configure" class="md-nav__link">
      Configuration with OSG-Configure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../common/registration/" title="Registration" class="md-nav__link">
      Registration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Other
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/gsissh/" title="Install GSI-enabled SSH" class="md-nav__link">
      Install GSI-enabled SSH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-gwms-frontend/" title="Install GlideinWMS Frontend" class="md-nav__link">
      Install GlideinWMS Frontend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-cvmfs-stratum1/" title="Install a CVMFS Stratum 1" class="md-nav__link">
      Install a CVMFS Stratum 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/network-performance-toolkit/" title="Install the Network Performance Toolkit" class="md-nav__link">
      Install the Network Performance Toolkit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/troubleshooting-gratia/" title="Troubleshooting Gratia" class="md-nav__link">
      Troubleshooting Gratia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/schedd-filebeats/" title="Install Transfer Log Filebeats" class="md-nav__link">
      Install Transfer Log Filebeats
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Release Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Release Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/notes/" title="Release Note Overview" class="md-nav__link">
      Release Note Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      3.4 Release Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        3.4 Release Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-17-2/" title="OSG Release 3.4.17-2" class="md-nav__link">
      OSG Release 3.4.17-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-17/" title="OSG Release 3.4.17" class="md-nav__link">
      OSG Release 3.4.17
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-16-2/" title="OSG Release 3.4.16-2" class="md-nav__link">
      OSG Release 3.4.16-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-16/" title="OSG Release 3.4.16" class="md-nav__link">
      OSG Release 3.4.16
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-15/" title="OSG Release 3.4.15" class="md-nav__link">
      OSG Release 3.4.15
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14-2/" title="OSG Release 3.4.14-2" class="md-nav__link">
      OSG Release 3.4.14-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-14/" title="OSG Release 3.4.14" class="md-nav__link">
      OSG Release 3.4.14
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-13/" title="OSG Release 3.4.13" class="md-nav__link">
      OSG Release 3.4.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-3/" title="OSG Release 3.4.12-3" class="md-nav__link">
      OSG Release 3.4.12-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12-2/" title="OSG Release 3.4.12-2" class="md-nav__link">
      OSG Release 3.4.12-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-12/" title="OSG Release 3.4.12" class="md-nav__link">
      OSG Release 3.4.12
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-11/" title="OSG Release 3.4.11" class="md-nav__link">
      OSG Release 3.4.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-10/" title="OSG Release 3.4.10" class="md-nav__link">
      OSG Release 3.4.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9-2/" title="OSG Release 3.4.9-2" class="md-nav__link">
      OSG Release 3.4.9-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-9/" title="OSG Release 3.4.9" class="md-nav__link">
      OSG Release 3.4.9
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-8/" title="OSG Release 3.4.8" class="md-nav__link">
      OSG Release 3.4.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-7/" title="OSG Release 3.4.7" class="md-nav__link">
      OSG Release 3.4.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6-2/" title="OSG Release 3.4.6-2" class="md-nav__link">
      OSG Release 3.4.6-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-6/" title="OSG Release 3.4.6" class="md-nav__link">
      OSG Release 3.4.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-4/" title="OSG Release 3.4.5-4" class="md-nav__link">
      OSG Release 3.4.5-4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-3/" title="OSG Release 3.4.5-3" class="md-nav__link">
      OSG Release 3.4.5-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5-2/" title="OSG Release 3.4.5-2" class="md-nav__link">
      OSG Release 3.4.5-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-5/" title="OSG Release 3.4.5" class="md-nav__link">
      OSG Release 3.4.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-3/" title="OSG Release 3.4.4-3" class="md-nav__link">
      OSG Release 3.4.4-3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4-2/" title="OSG Release 3.4.4-2" class="md-nav__link">
      OSG Release 3.4.4-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-4/" title="OSG Release 3.4.4" class="md-nav__link">
      OSG Release 3.4.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-3/" title="OSG Release 3.4.3" class="md-nav__link">
      OSG Release 3.4.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2-2/" title="OSG Release 3.4.2-2" class="md-nav__link">
      OSG Release 3.4.2-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-2/" title="OSG Release 3.4.2" class="md-nav__link">
      OSG Release 3.4.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1-2/" title="OSG Release 3.4.1-2" class="md-nav__link">
      OSG Release 3.4.1-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-1/" title="OSG Release 3.4.1" class="md-nav__link">
      OSG Release 3.4.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0-2/" title="OSG Release 3.4.0-2" class="md-nav__link">
      OSG Release 3.4.0-2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/3.4/release-3-4-0/" title="OSG Release 3.4.0" class="md-nav__link">
      OSG Release 3.4.0
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/release_series/" title="OSG Release Series" class="md-nav__link">
      OSG Release Series
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/supported_platforms/" title="Supported Platforms" class="md-nav__link">
      Supported Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../other/install-osg-upcoming-software/" title="OSG upcoming software" class="md-nav__link">
      OSG upcoming software
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/yum-basics/" title="Yum Basics" class="md-nav__link">
      Yum Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/signing/" title="RPM Signing" class="md-nav__link">
      RPM Signing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../release/contrib/" title="Contrib Software" class="md-nav__link">
      Contrib Software
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Monitoring
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Monitoring
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv/" title="Install RSV" class="md-nav__link">
      Install RSV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/advanced-rsv-configuration/" title="Advanced RSV Configuration" class="md-nav__link">
      Advanced RSV Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/rsv-control/" title="Manage RSV via rsv-control" class="md-nav__link">
      Manage RSV via rsv-control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/install-rsv-gwms-tester/" title="RSV GlideinWMS Tester" class="md-nav__link">
      RSV GlideinWMS Tester
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../common/help/" title="Get Help" class="md-nav__link">
      Get Help
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-starting" title="Before Starting" class="md-nav__link">
    Before Starting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-an-xrootd-server" title="Installing an XRootD Server" class="md-nav__link">
    Installing an XRootD Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-an-xrootd-server" title="Configuring an XRootD Server" class="md-nav__link">
    Configuring an XRootD Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimal-configuration" title="Minimal configuration" class="md-nav__link">
    Minimal configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-configuration" title="Advanced configuration" class="md-nav__link">
    Advanced configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-xrootd-cluster" title="Creating an XRootD cluster" class="md-nav__link">
    Creating an XRootD cluster
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modify-etcxrootdxrootd-clusteredcfg" title="Modify /etc/xrootd/xrootd-clustered.cfg" class="md-nav__link">
    Modify /etc/xrootd/xrootd-clustered.cfg
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-clustered-config" title="Verifying the clustered config" class="md-nav__link">
    Verifying the clustered config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-adding-simple-server-inventory-to-your-cluster" title="(Optional) Adding Simple Server Inventory to your cluster" class="md-nav__link">
    (Optional) Adding Simple Server Inventory to your cluster
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#starting-a-second-instance-of-xrootd-on-el-6" title="Starting a second instance of XRootD on EL 6" class="md-nav__link">
    Starting a second instance of XRootD on EL 6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-a-second-instance-of-xrootd-on-el-7" title="Starting a second instance of XRootD on EL 7" class="md-nav__link">
    Starting a second instance of XRootD on EL 7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-an-xrootd-cluster-with-ssi" title="Testing an XRootD cluster with SSI" class="md-nav__link">
    Testing an XRootD cluster with SSI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-enabling-xrootd-over-http" title="(Optional) Enabling Xrootd over HTTP" class="md-nav__link">
    (Optional) Enabling Xrootd over HTTP
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-enable-http-based-writes" title="(Optional) Enable HTTP based Writes" class="md-nav__link">
    (Optional) Enable HTTP based Writes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-enabling-a-fuse-mount" title="(Optional) Enabling a FUSE mount" class="md-nav__link">
    (Optional) Enabling a FUSE mount
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-authorization" title="(Optional) Authorization" class="md-nav__link">
    (Optional) Authorization
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authorization-file" title="Authorization file" class="md-nav__link">
    Authorization file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-option-1-adding-simple-unix-security" title="Security option 1: adding simple (Unix) security" class="md-nav__link">
    Security option 1: adding simple (Unix) security
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-an-xrootd-cluster-with-simple-security-enabled" title="Testing an XRootD cluster with simple security enabled" class="md-nav__link">
    Testing an XRootD cluster with simple security enabled
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-option-2-shared-keys" title="Security option 2: Shared keys" class="md-nav__link">
    Security option 2: Shared keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-option-3-xrootd-lcmaps-authorization" title="Security option 3: xrootd-lcmaps authorization" class="md-nav__link">
    Security option 3: xrootd-lcmaps authorization
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-adding-cms-tfc-support-to-xrootd-cms-sites-only" title="(Optional) Adding CMS TFC support to XRootD (CMS sites only)" class="md-nav__link">
    (Optional) Adding CMS TFC support to XRootD (CMS sites only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-adding-hadoop-support-to-xrootd" title="(Optional) Adding Hadoop support to XRootD" class="md-nav__link">
    (Optional) Adding Hadoop support to XRootD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-adding-file-residency-manager-frm-to-an-xrootd-cluster" title="(Optional) Adding File Residency Manager (FRM) to an XRootd cluster" class="md-nav__link">
    (Optional) Adding File Residency Manager (FRM) to an XRootd cluster
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-installing-a-gridftp-server" title="(Optional) Installing a GridFTP Server" class="md-nav__link">
    (Optional) Installing a GridFTP Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-xrootd" title="Using XRootD" class="md-nav__link">
    Using XRootD
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#managing-xrootd-services" title="Managing XRootD services" class="md-nav__link">
    Managing XRootD services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-help" title="Getting Help" class="md-nav__link">
    Getting Help
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" title="Reference" class="md-nav__link">
    Reference
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-locations" title="File locations" class="md-nav__link">
    File locations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#links" title="Links" class="md-nav__link">
    Links
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/opensciencegrid/docs-itb/edit/master/docs/data/install-xrootd.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="installing-and-maintaining-xrootd">Installing and Maintaining XRootD<a class="headerlink" href="#installing-and-maintaining-xrootd" title="Permanent link">&para;</a></h1>
<p><a href="http://xrootd.org/">XRootD</a> is a hierarchical storage system that can be used in a variety of ways to access data,
typically distributed among actual storage resources. 
One way to use XRootD is to have it refer to many data resources at a single site, and another way to use it is to refer
to many storage systems, most likely distributed among sites.  An XRootD system includes a <em>redirector</em>, which accepts
requests for data and finds a storage repository — locally or
otherwise — that can provide the data to the requestor.</p>
<p>Use this page to learn how to install, configure, and use an XRootD redirector as part of a Storage Element (SE) or as
part of a global namespace.</p>
<h2 id="before-starting">Before Starting<a class="headerlink" href="#before-starting" title="Permanent link">&para;</a></h2>
<p>Before starting the installation process, consider the following points:</p>
<ul>
<li><strong>User IDs:</strong> If it does not exist already, the installation will create the Linux user ID <code>xrootd</code></li>
<li><strong>Service certificate:</strong> The XRootD service uses a host certificate at <code>/etc/grid-security/host*.pem</code></li>
<li><strong>Networking:</strong> The XRootD service uses port 1094 by default</li>
</ul>
<p>As with all OSG software installations, there are some one-time (per host) steps to prepare in advance:</p>
<ul>
<li>Ensure the host has <a href="../../release/supported_platforms">a supported operating system</a></li>
<li>Obtain root access to the host</li>
<li>Prepare <a href="../../common/yum">the required Yum repositories</a></li>
<li>Install <a href="../../common/ca">CA certificates</a></li>
</ul>
<h2 id="installing-an-xrootd-server">Installing an XRootD Server<a class="headerlink" href="#installing-an-xrootd-server" title="Permanent link">&para;</a></h2>
<p>An installation of the XRootD server consists of the server itself and its dependencies. 
Install these with Yum:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install xrootd
</pre></div>


<h2 id="configuring-an-xrootd-server">Configuring an XRootD Server<a class="headerlink" href="#configuring-an-xrootd-server" title="Permanent link">&para;</a></h2>
<h3 id="minimal-configuration">Minimal configuration<a class="headerlink" href="#minimal-configuration" title="Permanent link">&para;</a></h3>
<p>A new installation of XRootD is already configured to run a standalone server that serves files from <code>/tmp</code> on the local
file system. 
This configuration is useful to verify basic connectivity between your clients and your server. 
To do this, start the <code>xrootd</code> service with standalone config as described in the <a href="#managing-xrootd-services">managing services
section</a>.</p>
<p>You should be able now to copy a file such as <code>/bin/sh</code> using <code>xrdcp</code> command into <code>/tmp</code>. 
To test, do:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install xrootd-client
<span class="gp">root@host #</span> xrdcp /bin/sh root://localhost:1094//tmp/first_test
<span class="go">[xrootd] Total 0.76 MB  [====================] 100.00 % [inf MB/s]</span>
<span class="gp">root@host #</span> ls -l /tmp/first_test
<span class="go">-rw-r--r-- 1 xrootd xrootd 801512 Apr 11 10:48 /tmp/first_test</span>
</pre></div>


<p>Other than for testing, a standalone server is useful when you want to serve files off of a single host with lots of
large disks. 
If your storage capacity is spread out over multiple hosts, you will need to set up an XRootD cluster.</p>
<h3 id="advanced-configuration">Advanced configuration<a class="headerlink" href="#advanced-configuration" title="Permanent link">&para;</a></h3>
<p>An advanced XRootD setup has multiple components; it is important to validate that each additional component that you
set up is working before moving on to the next component. 
We have included validation instructions after each component below.</p>
<h3 id="creating-an-xrootd-cluster">Creating an XRootD cluster<a class="headerlink" href="#creating-an-xrootd-cluster" title="Permanent link">&para;</a></h3>
<p><img alt="XRootD cluster" src="../../img/xrootd.jpg" /></p>
<p>If your storage is spread out over multiple hosts, you will need to set up an XRootD <em>cluster</em>. 
The cluster uses one "redirector" node as a frontend for user accesses, and multiple data nodes that have the data that
users request. 
Two daemons will run on each node:</p>
<p><code>xrootd</code><br/>
The eXtended Root Daemon controls file access and storage.</p>
<p><code>cmsd</code><br/>
The Cluster Management Services Daemon controls communication between nodes.</p>
<p>Note that for large virtual organizations, a site-level redirector may actually also communicate upwards to a regional
or global redirector that handles access to a multi-level hierarchy. 
This section will only cover handling one level of XRootD hierarchy.</p>
<p>In the instructions below, <span style="color:red">RDRNODE</span> will refer to the redirector host and <span style="color:red">DATANODE</span> will
refer to the data node host. 
These should be replaced with the fully-qualified domain name of the host in question.</p>
<h4 id="modify-etcxrootdxrootd-clusteredcfg">Modify /etc/xrootd/xrootd-clustered.cfg<a class="headerlink" href="#modify-etcxrootdxrootd-clusteredcfg" title="Permanent link">&para;</a></h4>
<p>You will need to modify the <code>xrootd-clustered.cfg</code> on the redirector node and each data node. 
The following example should serve as a base configuration for clustering. Further customizations are detailed below.</p>
<div class="codehilite"><pre><span></span>all.export <span style="color:red">/tmp</span> stage
set xrdr = <span style="color:red">RDRNODE</span>
all.manager $(xrdr):3121

if $(xrdr)
  # Lines in this block are only executed on the redirector node
  all.role manager
else
  # Lines in this block are executed on all nodes but the redirector node
  all.role server
  cms.space min <span style="color:red">2g 5g</span>
fi
</pre></div>


<p>You will need to customize the following lines:</p>
<table>
<thead>
<tr>
<th align="left">Configuration Line</th>
<th align="left">Changes Needed</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>all.export <span style="color:red">/tmp</span> stage</code></td>
<td align="left">Change <code>/tmp</code> to the directory to allow XRootD access to</td>
</tr>
<tr>
<td align="left"><code>set xrdr=<span style="color:red">RDRNODE</span></code></td>
<td align="left">Change to the hostname of the redirector</td>
</tr>
<tr>
<td align="left"><code>cms.space min <span style="color:red">2g 5g</span></code></td>
<td align="left">Reserve this amount of free space on the node. For this example, if space falls below 2GB, xrootd will not store further files on this node until space climbs above 5GB. You can use <code>k</code>, <code>m</code>, <code>g</code>, or <code>t</code> to indicate kilobyte, megabytes, gigabytes, or terabytes, respectively.</td>
</tr>
</tbody>
</table>
<p>Further information can be found at <a href="http://xrootd.slac.stanford.edu/doc">http://xrootd.slac.stanford.edu/doc</a></p>
<h4 id="verifying-the-clustered-config">Verifying the clustered config<a class="headerlink" href="#verifying-the-clustered-config" title="Permanent link">&para;</a></h4>
<p>Start both <code>xrootd</code> and <code>cmsd</code> on all nodes according to the instructions in the <a href="#ManagingServices">managing services
section</a>.</p>
<p>Verify that you can copy a file such as <code>/bin/sh</code> to <code>/tmp</code> on the server data via the redirector:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> xrdcp /bin/sh  root://<span style="color:red">RDRNODE</span>:1094///tmp/second_test
<span class="go">[xrootd] Total 0.76 MB  [====================] 100.00 % [inf MB/s]</span>
</pre></div>


<p>Check that the <code>/tmp/second_test</code> is located on data server <span style="color:red">DATANODE</span>.</p>
<h3 id="optional-adding-simple-server-inventory-to-your-cluster">(Optional) Adding Simple Server Inventory to your cluster<a class="headerlink" href="#optional-adding-simple-server-inventory-to-your-cluster" title="Permanent link">&para;</a></h3>
<p>The Simple Server Inventory (SSI) provide means to have an inventory for each data server. 
SSI requires:</p>
<ul>
<li>A second instance of the <code>xrootd</code> daemon on the redirector</li>
<li>A "composite name space daemon" (<code>XrdCnsd</code>) on each data server; this daemon handles the inventory</li>
</ul>
<p>As an example, we will set up a two-node XRootD cluster with SSI.</p>
<p>Host A is a redirector node that is running the following daemons:</p>
<ol>
<li>xrootd redirector</li>
<li>cmsd</li>
<li>xrootd - second instance that required for SSI</li>
</ol>
<p>Host B is a data server that is running the following daemons:</p>
<ol>
<li>xrootd data server</li>
<li>cmsd</li>
<li>XrdCnsd - started automatically by xrootd</li>
</ol>
<p>We will need to create a directory on the redirector node for Inventory files.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> mkdir -p /data/inventory
<span class="gp">root@host #</span> chown xrootd:xrootd /data/inventory
</pre></div>


<p>On the data server (host B) let's use a storage cache that will be at a different location from <code>/tmp</code>. </p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> mkdir -p  /local/xrootd
<span class="gp">root@host #</span> chown xrootd:xrootd /local/xrootd
</pre></div>


<p>We will be running two instances of XRootD on <span style="color:red">hostA</span>. 
Modify <code>/etc/xrootd/xrootd-clustered.cfg</code> to give the two instances different behavior, as such:</p>
<div class="codehilite"><pre><span></span>all.export /data/xrootdfs
set xrdr=<span style="color:red">hostA</span>
all.manager $(xrdr):3121
if $(xrdr) &amp;&amp; named cns
      all.export /data/inventory
      xrd.port 1095
else if $(xrdr)
      all.role manager
      xrd.port 1094
else
      all.role server
      oss.localroot /local/xrootd
      ofs.notify closew create mkdir mv rm rmdir trunc | /usr/bin/XrdCnsd -d -D 2 -i 90 -b $(xrdr):1095:/data/inventory
      #add cms.space if you have less the 11GB
      # cms.space options http://xrootd.slac.stanford.edu/doc/dev/cms_config.htm
      cms.space min 2g 5g
fi
</pre></div>


<p>The value of <code>oss.localroot</code> will be prepended to any file access.<br />
E.g. accessing <code>root://<span style="color:red">RDRNODE</span>:1094//data/xrootdfs/test1</code> will actually go to
<code>/local/xrootd/data/xrootdfs/test1</code>.</p>
<h4 id="starting-a-second-instance-of-xrootd-on-el-6">Starting a second instance of XRootD on EL 6<a class="headerlink" href="#starting-a-second-instance-of-xrootd-on-el-6" title="Permanent link">&para;</a></h4>
<p>The procedure for starting a second instance differs between EL 6 and EL 7. 
This section is the procedure for EL 6.</p>
<p>Now, we have to change <code>/etc/sysconfig/xrootd</code> on the redirector node (<span style="color:red">hostA</span>) to run multiple instances
of XRootD. 
The second instance of XRootD will be named "cns" and will be used for SSI.</p>
<div class="codehilite"><pre><span></span>XROOTD_USER=xrootd 
XROOTD_GROUP=xrootd 
XROOTD_DEFAULT_OPTIONS=&quot;<span style="color:red">-k 7</span> -l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-clustered.cfg&quot;
<span style="color:red">XROOTD_CNS_OPTIONS=&quot;-k 7 -l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-clustered.cfg&quot;</span> 
CMSD_DEFAULT_OPTIONS=&quot;<span style="color:red">-k 7</span> -l /var/log/xrootd/cmsd.log -c /etc/xrootd/xrootd-clustered.cfg&quot; 
FRMD_DEFAULT_OPTIONS=&quot;<span style="color:red">-k 7</span> -l /var/log/xrootd/frmd.log -c /etc/xrootd/xrootd-clustered.cfg&quot; 
<span style="color:red">XROOTD_INSTANCES=&quot;default cns&quot;</span> 
CMSD_INSTANCES=&quot;default&quot; 
FRMD_INSTANCES=&quot;default&quot; 
</pre></div>


<p>Now, we can start XRootD cluster executing the following commands. 
On redirector you will see:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> service xrootd start 
<span class="go">Starting xrootd (xrootd, default): <span style="color:green">[ OK ]</span> </span>
<span class="go">Starting xrootd (xrootd, cns): <span style="color:green">[ OK ]</span> </span>
<span class="gp">root@host #</span> service cmsd start 
<span class="go">Starting xrootd (cmsd, default): <span style="color:green">[ OK ]</span> </span>
</pre></div>


<p>On redirector node you should see two instances of xrootd running:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> ps auxww<span class="p">|</span>grep xrootd
<span class="go">xrootd 29036 0.0 0.0 44008 3172 ? Sl Apr11 0:00 /usr/bin/xrootd -k 7 -l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-clustered.cfg -b -s /var/run/xrootd/xrootd-default.pid -n default</span>
<span class="go">xrootd 29108 0.0 0.0 43868 3016 ? Sl Apr11 0:00 /usr/bin/xrootd -k 7 -l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-clustered.cfg -b -s /var/run/xrootd/xrootd-cns.pid -n cns</span>
<span class="go">xrootd 29196 0.0 0.0 51420 3692 ? Sl Apr11 0:00 /usr/bin/cmsd -k 7 -l /var/log/xrootd/cmsd.log -c /etc/xrootd/xrootd-clustered.cfg -b -s /var/run/xrootd/cmsd-default.pid -n default</span>
</pre></div>


<p><span style="color:red">Warning</span> the log file for second named instance of xrootd with be
placed in <code>/var/log/xrootd/cns/xrootd.log</code></p>
<p>On data server node you should that XrdCnsd process has been started:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> ps auxww<span class="p">|</span>grep xrootd
<span class="go">xrootd 19156 0.0 0.0 48096 3256 ? Sl 07:37 0:00 /usr/bin/cmsd -l /var/log/xrootd/cmsd.log -c /etc/xrootd/xrootd-clustered.cfg -b -s /var/run/xrootd/cmsd-default.pid -n default</span>
<span class="go">xrootd 19880 0.0 0.0 46124 2916 ? Sl 08:33 0:00 /usr/bin/xrootd -l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-clustered.cfg -b -s /var/run/xrootd/xrootd-default.pid -n default</span>
<span class="go">xrootd 19894 0.0 0.1 71164 6960 ? Sl 08:33 0:00 /usr/bin/XrdCnsd -d -D 2 -i 90 -b fermicloud053.fnal.gov:1095:/data/inventory</span>
</pre></div>


<h4 id="starting-a-second-instance-of-xrootd-on-el-7">Starting a second instance of XRootD on EL 7<a class="headerlink" href="#starting-a-second-instance-of-xrootd-on-el-7" title="Permanent link">&para;</a></h4>
<p>The procedure for starting a second instance differs between EL 6 and EL 7. 
This section is the procedure for EL 7.</p>
<ol>
<li>Create a symlink pointing to <code>/etc/xrootd/xrootd-clustered.cfg</code> at <code>/etc/xrootd/xrootd-cns.cfg</code>:</li>
</ol>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> ln -s /etc/xrootd/xrootd-clustered.cfg /etc/xrootd/xrootd-cns.cfg
</pre></div>


<ol>
<li>Start an instance of the <code>xrootd</code> service named <code>cns</code> using the syntax in the <a href="#ManagingServices">managing services section</a>:</li>
</ol>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> systemctl start xrootd@cns
</pre></div>


<h4 id="testing-an-xrootd-cluster-with-ssi">Testing an XRootD cluster with SSI<a class="headerlink" href="#testing-an-xrootd-cluster-with-ssi" title="Permanent link">&para;</a></h4>
<ol>
<li>Copy file to redirector node specifying storage path (/data/xrootdfs instead of /tmp):</li>
</ol>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> xrdcp /bin/sh root://<span style="color:red">RDRNODE</span>:1094//data/xrootdfs/test1 
<span class="go">[xrootd] Total 0.00 MB [================] 100.00 % [inf MB/s] </span>
</pre></div>


<ol>
<li>To verify that SSI is working execute <code>cns_ssi</code> command on the redirector node:</li>
</ol>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cns_ssi list /data/inventory 
<span class="go">fermicloud054.fnal.gov incomplete inventory as of Mon Apr 11 17:28:11 2011 </span>
<span class="gp">root@host #</span> cns_ssi updt /data/inventory 
<span class="go">cns_ssi: fermicloud054.fnal.gov inventory with 1 directory and 1 file updated with 0 errors. </span>
<span class="gp">root@host #</span> cns_ssi list /data/inventory 
<span class="go">fermicloud054.fnal.gov complete inventory as of Tue Apr 12 07:38:29 2011 /data/xrootdfs/test1 </span>
</pre></div>


<p><strong>Note</strong>: In this example, <code>fermicloud53.fnal.gov</code> is a redirector node and <code>fermicloud054.fnal.gov</code> is a data node.</p>
<h3 id="optional-enabling-xrootd-over-http">(Optional) Enabling Xrootd over HTTP<a class="headerlink" href="#optional-enabling-xrootd-over-http" title="Permanent link">&para;</a></h3>
<p>XRootD can be accessed using the HTTP protocol. To do that:</p>
<ol>
<li>
<p>Modify <code>/etc/xrootd/xrootd-clustered.cfg</code> and add the following lines. You will also need to add the configuration regarding <a href="#security-option-3-xrootd-lcmaps-authorization">lcmaps authorization</a>.</p>
<div class="codehilite"><pre><span></span>   if exec xrootd
    xrd.protocol http:1094 libXrdHttp.so
    http.cadir /etc/grid-security/certificates
    http.cert /etc/grid-security/xrd/xrdcert.pem
    http.key /etc/grid-security/xrd/xrdkey.pem
    http.secxtractor /usr/lib64/libXrdLcmaps.so
    http.listingdeny yes
    http.staticpreload http://static/robots.txt /etc/xrootd/robots.txt
    http.desthttps yes
   fi
</pre></div>


</li>
<li>
<p>Create robots.txt. Add file <code>/etc/xrootd/robots.txt</code> with these contents:</p>
<div class="codehilite"><pre><span></span>   User-agent: *
   Disallow: /
</pre></div>


</li>
<li>
<p>Testing the configuration</p>
<p>From the terminal, generate a proxy and attempt to use davix-get to copy from your XRootD host (the XRootD service needs running; see the <a href="#managing-xrootd-services">services section</a>).  For example, if your server has a file named <code>/store/user/test.root</code>:</p>
<div class="codehilite"><pre><span></span><span class="go">   davix-get https://<span style="color:red">yourHostname</span>:1094/store/user/test.root -E /tmp/x509up_u`id -u` --capath /etc/grid-security/certificates</span>
</pre></div>


</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For clients to successfully read from the regional redirector, HTTPS must be enabled for the data servers and the site-level redirector.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you have <code>u *</code> in your Authfile, recall this provides an authorization to ALL users, including unauthenticated. This includes random web spiders!</p>
</div>
<h4 id="optional-enable-http-based-writes">(Optional) Enable HTTP based Writes<a class="headerlink" href="#optional-enable-http-based-writes" title="Permanent link">&para;</a></h4>
<p>No changes to the HTTP module is needed to enable HTTP-based writes.  The HTTP protocol uses the same authorization setup as the XRootD protocol.  For example, you may need to provide <code>a</code> (all) style authorizations to allow users authorization to write. See the <a href="##authorization-file">Authentication File section</a> for more details.</p>
<h3 id="optional-enabling-a-fuse-mount">(Optional) Enabling a FUSE mount<a class="headerlink" href="#optional-enabling-a-fuse-mount" title="Permanent link">&para;</a></h3>
<p>XRootD storage can be mounted as a standard POSIX filesystem via FUSE, providing users with a more familiar interface..</p>
<p>Modify <code>/etc/fstab</code> by adding the following entries:</p>
<div class="codehilite"><pre><span></span>....
xrootdfs                <span style="color:red">/mnt/xrootd</span>              fuse    rdr=xroot://<span style="color:red">redirector1.domain.com</span>:1094/<span style="color:red">/path/</span>,uid=xrootd 0 0
</pre></div>


<p>Replace <code>/mnt/xrootd</code> with the path that you would like to access with. 
This should also match the GridFTP settings for the <code>XROOTD_VMP</code> local path. 
Create <code>/mnt/xrootd</code> directory. Make sure the xrootd user exists on the system. Once you are finished, you can mount it:</p>
<div class="codehilite"><pre><span></span>mount /mnt/xrootd
</pre></div>


<p>You should now be able to run UNIX commands such as <code>ls /mnt/xrootd</code> to see the contents of the XRootD server.</p>
<h3 id="optional-authorization">(Optional) Authorization<a class="headerlink" href="#optional-authorization" title="Permanent link">&para;</a></h3>
<p>There are several authorization options in XRootD available through the security plugins. 
In this document, we will cover two options for security:</p>
<ul>
<li><a href="#security-option-1-adding-simple-unix-security">Simple Unix Security</a>: Based on user accounts that the client is
    logged in as.</li>
<li><a href="#security-option-2-shared-keys">Shared-key based authentication</a>.</li>
<li><a href="#security-option-3-xrootd-lcmaps-authorization"><code>xrootd-lcmaps</code></a>: Using the LCMAPS callout to use X509-based
    authentication</li>
</ul>
<p>Note: On the data nodes, the files will actually be owned by unix user <code>xrootd</code> (or other daemon user), not as the user
authenticated to, under most circumstances. 
XRootD will verify the permissions and authorization based on the user that the security plugin authenticates you to
(for instance, your unix user for option 1 or your gums id for option 2), but, internally, the data node files will be
owned by the <code>xrootd</code> user.</p>
<h4 id="authorization-file">Authorization file<a class="headerlink" href="#authorization-file" title="Permanent link">&para;</a></h4>
<p>In order to add security to your cluster you will need to add "auth_file" on the your data server node. 
Create <code>/etc/xrootd/auth_file</code> :</p>
<div class="codehilite"><pre><span></span># This means that all the users have read access to the datasets 
u * <span style="color:red">/data/xrootdfs</span> lr

# This means that all the users have full access to their private dirs 
u = <span style="color:red">/data/xrootdfs/</span>@=/ a

# This means that this privileged user can do everything 
# You need at least one user like that, in order to create the 
# private dir for each user willing to store his data in the facility 
u xrootd <span style="color:red">/data/xrootdfs</span> a 
</pre></div>


<p>Here we assume that your storage path is <code>/data/xrootdfs</code> (same as in the
previous example).</p>
<p>Change file ownership (if you have created file as root):</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> chown xrootd:xrootd /etc/xrootd/auth_file
</pre></div>


<p>This file is a flat file of the following form:</p>
<div class="codehilite"><pre><span></span>idtype id path privs
</pre></div>


<p>Some examples of each option. For more details or examples on how to use
templated user options, see <a href="http://xrootd.org/doc/dev47/sec_config.htm#_Toc489606599">XRootd Authorization Database
File</a>.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>idtype</td>
<td>Type of id. Use <code>u</code> for username, <code>g</code> for group, etc.</td>
</tr>
<tr>
<td>id</td>
<td>Username (or groupname). Use <code>*</code> for all users or <code>=</code> for user-specific capabilities, like home directories</td>
</tr>
<tr>
<td>path</td>
<td>The path prefix to be used for matching purposes</td>
</tr>
<tr>
<td>privs</td>
<td>Letter list of privileges: <code>a - all ; l - lookup ; d - delete ; n - rename ; i - insert ; r - read ; k - lock (not used) ; w - write</code></td>
</tr>
</tbody>
</table>
<h4 id="security-option-1-adding-simple-unix-security">Security option 1: adding simple (Unix) security<a class="headerlink" href="#security-option-1-adding-simple-unix-security" title="Permanent link">&para;</a></h4>
<p>The first step in adding simple Unix security to validate based on username is to create the <code>auth_file</code> as in the
previous section.</p>
<p>The next step is to modify <code>/etc/xrootd/xrootd-clustered.cfg</code> on both nodes:</p>
<div class="codehilite"><pre><span></span>all.export /data/xrootdfs 
set xrdr=<span style="color:red">hostA</span> 
all.manager $(xrdr):3121 
if $(xrdr) &amp;&amp; named cns 
    all.export /data/inventory 
    xrd.port 1095 
else if $(xrdr) 
    all.role manager 
    xrd.port 1094 
else 
    all.role server 
    oss.localroot /local/xrootd 
    ofs.notify closew create mkdir mv rm rmdir trunc | /usr/bin/XrdCnsd -d -D 2 -i 90 -b $(xrdr):1095:/data/inventory 
    cms.space min 2g 5g 

    <span style="color:red"> # ENABLE_SECURITY_BEGIN 
    xrootd.seclib /usr/lib64/libXrdSec.so 
    # this specify that we use the &#39;unix&#39; authentication module, additional one can be specified. 
    sec.protocol /usr/lib64 unix 
    # this is the authorization file 
    acc.authdb /etc/xrootd/auth_file 
    ofs.authorize 
    # ENABLE_SECURITY_END </span> 
fi 
</pre></div>


<p>Note that, to access users directories, you will have to create them in oss.localroot (For instance,
<code>/local/xrootd/data/xrootdfs/username</code>) and make sure they are writable by <code>xrootd</code> user (or the daemon user, if you
have changed it). 
Files in localroot on the data nodes are normally owned by <code>xrootd</code> not by the authenticated username.</p>
<p>After making all the changes, please, restart XRootD and cmsd daemons on all nodes.</p>
<h4 id="testing-an-xrootd-cluster-with-simple-security-enabled">Testing an XRootD cluster with simple security enabled<a class="headerlink" href="#testing-an-xrootd-cluster-with-simple-security-enabled" title="Permanent link">&para;</a></h4>
<ol>
<li>Login on redirector node as root</li>
<li>Check that user "root" still can read files:</li>
</ol>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> xrdcp root://<span style="color:red">RDRNODE</span>:1094//data/xrootdfs/test1 /tmp/b 
<span class="go">[xrootd] Total 0.00 MB [================] 100.00 % [inf MB/s]</span>
</pre></div>


<ol>
<li>Check that user "root" can not write files under /data/xrootdfs:</li>
</ol>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> xrdcp /tmp/b root://<span style="color:red">RDRNODE</span>:1094//data/xrootdfs/test2 
<span class="go">Last server error 3010 (&#39;Unable to create /data/xrootdfs/test2; Permission denied&#39;) </span>
<span class="go">Error accessing path/file for root://localhost:1094//data/xrootdfs/test3 </span>
</pre></div>


<p>or you may get this error:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> xrdcp /tmp/b root://<span style="color:red">RDRNODE</span>:1094//data/xrootdfs/test2 
<span class="go">Last server error 3011 (&#39;No servers are available to write the file.&#39;) </span>
<span class="go">Error accessing path/file for root://localhost:1094//data/xrootdfs/test2</span>
</pre></div>


<ol>
<li>Check that user can copy/retrieve files to/from /data/xrootdfs/~/...</li>
</ol>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> su - <span style="color:red">user</span> 
<span class="go">-bash-3.2$ xrdcp /tmp/a root://<span style="color:red">RDRNODE</span>:1094//data/xrootdfs/<span style="color:red">user</span>/test1</span>
<span class="go">[xrootd] Total 0.00 MB [================] 100.00 % [inf MB/s] </span>
<span class="go">-bash-3.2$ xrdcp root://localhost:1094//data/xrootdfs/<span style="color:red">user</span>/test1 /tmp/c </span>
<span class="go">[xrootd] Total 0.00 MB [================] 100.00 % [inf MB/s]</span>
</pre></div>


<h4 id="security-option-2-shared-keys">Security option 2: Shared keys<a class="headerlink" href="#security-option-2-shared-keys" title="Permanent link">&para;</a></h4>
<p>If you want to enable security for access to XRootD via xrootdfs you will need to modify XRootD configuration and
perform several steps to make xrootdfs secured.</p>
<ol>
<li>
<p>On the XRootD redirector node, execute the following command:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> xrdsssadmin -k <span style="color:red">&lt;my_key_name&gt;</span> -u anybody -g usrgroup add <span style="color:red">&lt;keyfile&gt;</span>
</pre></div>


<p>eg:</p>
<div class="codehilite"><pre><span></span>root@host # xrdsssadmin -k top_secret -u anybody -g usrgroup add /etc/xrootd/xrootd.key
</pre></div>


</li>
<li>
<p>Set ownership</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> chown xrootd.xrootd /etc/xrootd/xrootd.key
</pre></div>


</li>
<li>
<p>On the node where xrootdfs is installed modify <code>/etc/fstab</code> add security information:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> xrootdfs <span style="color:red">/mnt/xrootd </span> fuse <span class="nv">rdr</span><span class="o">=</span>xroot://<span style="color:red">redirector1.domain.com</span>:1094/<span style="color:red">/path/redirector1</span>,uid<span class="o">=</span>xrootd,sss<span class="o">=</span><span style="color:red">keyfile</span> <span class="m">0</span> <span class="m">0</span>
</pre></div>


</li>
<li>
<p>On all XRootD data servers and redirector nodes, modify XRootD configuration (<code>/etc/xrootd/xrootd-clustered.cfg</code>) by adding the following segment:</p>
<div class="codehilite"><pre><span></span># ENABLE_SECURITY_BEGIN
   xrootd.seclib /usr/lib64/libXrdSec.so
   #the line below should be before &quot;sec.protocol ... unix&quot;
   <span style="color:red">sec.protocol /usr/lib64 sss -s keyfile </span>
   sec.protocol /usr/lib64 unix
   # this specify that we use the &#39;unix&#39; authentication module, additional one can be specified.
   # this is the authorization file
   acc.authdb /etc/xrootd/auth_file
   ofs.authorize
   # ENABLE_SECURITY_END
</pre></div>


</li>
<li>
<p>On all XRootD data server nodes, edit <code>/etc/xrootd/auth_file</code> to add authorized users of the form <code>u <span style="color:red">username</span> <span style="color:red">/directoryname</span> lr</code> where "lr" is the permission set.</p>
</li>
<li>
<p>Copy <span style="color:red">keyfile</span> from redirector node to every data server node and the xrootdfs node. Make sure that this file is owned by the <code>xrootd</code> user.</p>
</li>
<li>
<p>Restart XRootD cluster by restarting all the relevant daemons.</p>
</li>
<li>
<p>On xroodfs node execute mount:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> mount <span style="color:red">/mnt/xrootd</span>
</pre></div>


</li>
<li>
<p>Verify that you can access the mount point (df,ls) and can not write into unauthorized path, e.g:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> cp /bin/sh /mnt/xrootd/tlevshin/test1 cp:
<span class="go">cannot create regular file `/mnt/xrootd/tlevshin/test1&#39;: Permission denied</span>
</pre></div>


<p>Login as yourself and try:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> su - tlevshin
<span class="gp">user@host $</span> cp /bin/sh /mnt/xrootd/tlevshin/test1
</pre></div>


</li>
</ol>
<h4 id="security-option-3-xrootd-lcmaps-authorization">Security option 3: xrootd-lcmaps authorization<a class="headerlink" href="#security-option-3-xrootd-lcmaps-authorization" title="Permanent link">&para;</a></h4>
<p>The xrootd-lcmaps security plugin uses the <code>lcmaps</code> library and the <a href="../../security/lcmaps-voms-authentication">LCMAPS VOMS plugin</a>
to authenticate and authorize users based on X509 certificates and VOMS attributes. Perform the following instructions
on all data nodes:</p>
<ol>
<li>
<p>Install <a href="../../common/ca#installing-ca-certificates">CA certificates</a> and <a href="../../common/ca#installing-ca-certificates#managing-certificate-revocation-lists">manage CRLs</a></p>
</li>
<li>
<p>Follow the instructions for requesting a <a href="../../security/host-certs#requesting-and-installing-a-service-certificate">service certificate</a>,
   using <code>xrootd</code> for both the <code>&lt;SERVICE&gt;</code> and <code>&lt;OWNER&gt;</code>, resulting in a certificate and key in <code>/etc/grid-security/xrootd/xrootdcert.pem</code>
   and <code>/etc/grid-security/xrootd/xrootdkey.pem</code>, respectively.</p>
</li>
<li>
<p>Install and configure the <a href="../../security/lcmaps-voms-authentication">LCMAPS VOMS plugin</a></p>
</li>
<li>
<p>Install <code>xrootd-lcmaps</code> and necessary configuration:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install xrootd-lcmaps vo-client
</pre></div>


</li>
<li>
<p>Append the following to <code>/etc/lcmaps.db</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">xrootd_policy</span><span class="o">:</span>
<span class="n">verifyproxynokey</span> <span class="o">-&gt;</span> <span class="n">banfile</span>
<span class="n">banfile</span> <span class="o">-&gt;</span> <span class="n">banvomsfile</span> <span class="o">|</span> <span class="n">bad</span>
<span class="n">banvomsfile</span> <span class="o">-&gt;</span> <span class="n">gridmapfile</span> <span class="o">|</span> <span class="n">bad</span>
<span class="n">gridmapfile</span> <span class="o">-&gt;</span> <span class="n">good</span> <span class="o">|</span> <span class="n">vomsmapfile</span>
<span class="n">vomsmapfile</span> <span class="o">-&gt;</span> <span class="n">good</span> <span class="o">|</span> <span class="n">defaultmapfile</span>
<span class="n">defaultmapfile</span> <span class="o">-&gt;</span> <span class="n">good</span> <span class="o">|</span> <span class="n">bad</span>
</pre></div>


</li>
<li>
<p>Modify <code>/etc/osg/config.d/10-misc.ini</code> so that future invocations don't overwrite your <code>/etc/lcmaps.db</code> changes:</p>
<div class="codehilite"><pre><span></span>edit_lcmaps_db = False
</pre></div>


</li>
<li>
<p>Configure access rights for mapped users by creating and modifying the XRootD <a href="#authorization-file">authorization file</a></p>
</li>
<li>
<p>Modify your XRootD configuration:</p>
<ol>
<li>
<p>Choose the configuration file to edit based on the following table:</p>
<table>
<thead>
<tr>
<th align="left">If you are running XRootD in...</th>
<th align="left">Then modify the following file...</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Standalone mode</td>
<td align="left"><code>/etc/xrootd/xrootd-standalone.cfg</code></td>
</tr>
<tr>
<td align="left">Clustered mode</td>
<td align="left"><code>/etc/xrootd/xrootd-clustered.cfg</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Add the following lines to the configuration that you chose above:</p>
<div class="codehilite"><pre><span></span><span class="s s-Atom">xrootd</span><span class="p">.</span><span class="s s-Atom">seclib</span> <span class="o">/</span><span class="s s-Atom">usr</span><span class="o">/</span><span class="s s-Atom">lib64</span><span class="o">/</span><span class="s s-Atom">libXrdSec</span><span class="o">-</span><span class="mf">4.</span><span class="s s-Atom">so</span>
<span class="s s-Atom">sec</span><span class="p">.</span><span class="s s-Atom">protocol</span> <span class="o">/</span><span class="s s-Atom">usr</span><span class="o">/</span><span class="s s-Atom">lib64</span> <span class="s s-Atom">gsi</span> <span class="o">-</span><span class="nn">certdir</span><span class="p">:</span><span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">grid</span><span class="o">-</span><span class="s s-Atom">security</span><span class="o">/</span><span class="s s-Atom">certificates</span> <span class="s s-Atom">\</span>
                    <span class="o">-</span><span class="nn">cert</span><span class="p">:</span><span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">grid</span><span class="o">-</span><span class="s s-Atom">security</span><span class="o">/</span><span class="s s-Atom">xrootd</span><span class="o">/</span><span class="s s-Atom">xrootdcert</span><span class="p">.</span><span class="s s-Atom">pem</span> <span class="s s-Atom">\</span>
                    <span class="o">-</span><span class="nn">key</span><span class="p">:</span><span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">grid</span><span class="o">-</span><span class="s s-Atom">security</span><span class="o">/</span><span class="s s-Atom">xrootd</span><span class="o">/</span><span class="s s-Atom">xrootdkey</span><span class="p">.</span><span class="s s-Atom">pem</span> <span class="o">-</span><span class="nn">crl</span><span class="p">:</span><span class="mi">1</span> <span class="s s-Atom">\</span>
                    <span class="o">-</span><span class="nn">authzfun</span><span class="p">:</span><span class="s s-Atom">libXrdLcmaps</span><span class="p">.</span><span class="s s-Atom">so</span> <span class="o">-</span><span class="nn">authzfunparms</span><span class="p">:</span><span class="s s-Atom">--loglevel</span><span class="p">,</span><span class="mi">0</span> <span class="s s-Atom">\</span>
                    <span class="o">-</span><span class="nn">gmapopt</span><span class="p">:</span><span class="mi">10</span> <span class="o">-</span><span class="nn">gmapto</span><span class="p">:</span><span class="mi">0</span>
<span class="s s-Atom">acc</span><span class="p">.</span><span class="s s-Atom">authdb</span> <span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">xrootd</span><span class="o">/</span><span class="s s-Atom">auth_file</span>
<span class="s s-Atom">ofs</span><span class="p">.</span><span class="s s-Atom">authorize</span>
</pre></div>


<p>If you are running XRootD in clustered mode, the above will also need to be added to all data nodes in the section relevant to the data node server. For instance, in the <a href="#security-option-1-adding-unix-security">above example</a>, the security configuration should be placed after the <code>all.role server</code> line:</p>
<div class="codehilite"><pre><span></span><span class="s s-Atom">all</span><span class="p">.</span><span class="s s-Atom">export</span> <span class="o">/</span><span class="s s-Atom">data</span><span class="o">/</span><span class="s s-Atom">xrootdfs</span>
<span class="s s-Atom">set</span> <span class="s s-Atom">xrdr=</span><span class="c1"><span style="color:red">hostA</span></span>
<span class="s s-Atom">all</span><span class="p">.</span><span class="s s-Atom">manager</span> <span class="err">$</span><span class="p">(</span><span class="s s-Atom">xrdr</span><span class="p">)</span><span class="s s-Atom">:</span><span class="mi">3121</span>
<span class="s s-Atom">if</span> <span class="err">$</span><span class="p">(</span><span class="s s-Atom">xrdr</span><span class="p">)</span> <span class="s s-Atom">&amp;&amp;</span> <span class="s s-Atom">named</span> <span class="s s-Atom">cns</span>
    <span class="s s-Atom">all</span><span class="p">.</span><span class="s s-Atom">export</span> <span class="o">/</span><span class="s s-Atom">data</span><span class="o">/</span><span class="s s-Atom">inventory</span>
    <span class="s s-Atom">xrd</span><span class="p">.</span><span class="s s-Atom">port</span> <span class="mi">1095</span>
<span class="s s-Atom">else</span> <span class="s s-Atom">if</span> <span class="err">$</span><span class="p">(</span><span class="s s-Atom">xrdr</span><span class="p">)</span>
    <span class="s s-Atom">all</span><span class="p">.</span><span class="s s-Atom">role</span> <span class="s s-Atom">manager</span>
    <span class="s s-Atom">xrd</span><span class="p">.</span><span class="s s-Atom">port</span> <span class="mi">1094</span>
<span class="s s-Atom">else</span>
    <span class="s s-Atom">all</span><span class="p">.</span><span class="s s-Atom">role</span> <span class="s s-Atom">server</span>
    <span class="s s-Atom">oss</span><span class="p">.</span><span class="s s-Atom">localroot</span> <span class="o">/</span><span class="s s-Atom">local</span><span class="o">/</span><span class="s s-Atom">xrootd</span>
    <span class="s s-Atom">ofs</span><span class="p">.</span><span class="s s-Atom">notify</span> <span class="s s-Atom">closew</span> <span class="s s-Atom">create</span> <span class="s s-Atom">mkdir</span> <span class="s s-Atom">mv</span> <span class="s s-Atom">rm</span> <span class="s s-Atom">rmdir</span> <span class="s s-Atom">trunc</span> <span class="p">|</span> <span class="o">/</span><span class="s s-Atom">usr</span><span class="o">/</span><span class="s s-Atom">bin</span><span class="o">/</span><span class="nv">XrdCnsd</span> <span class="o">-</span><span class="s s-Atom">d</span> <span class="o">-</span><span class="nv">D</span> <span class="mi">2</span> <span class="o">-</span><span class="s s-Atom">i</span> <span class="mi">90</span> <span class="o">-</span><span class="s s-Atom">b</span> <span class="err">$</span><span class="p">(</span><span class="s s-Atom">xrdr</span><span class="p">)</span><span class="s s-Atom">:</span><span class="mi">1095</span><span class="s s-Atom">:/data</span><span class="o">/</span><span class="s s-Atom">inventory</span>
    <span class="s s-Atom">cms</span><span class="p">.</span><span class="s s-Atom">space</span> <span class="s s-Atom">min</span> <span class="mi">2</span><span class="s s-Atom">g</span> <span class="mi">5</span><span class="s s-Atom">g</span>

    <span class="c1"><span style="color:red"> # ENABLE_SECURITY_BEGIN</span>
    <span class="s s-Atom">xrootd</span><span class="p">.</span><span class="s s-Atom">seclib</span> <span class="o">/</span><span class="s s-Atom">usr</span><span class="o">/</span><span class="s s-Atom">lib64</span><span class="o">/</span><span class="s s-Atom">libXrdSec</span><span class="o">-</span><span class="mf">4.</span><span class="s s-Atom">so</span>
    <span class="s s-Atom">sec</span><span class="p">.</span><span class="s s-Atom">protocol</span> <span class="o">/</span><span class="s s-Atom">usr</span><span class="o">/</span><span class="s s-Atom">lib64</span> <span class="s s-Atom">gsi</span> <span class="o">-</span><span class="nn">certdir</span><span class="p">:</span><span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">grid</span><span class="o">-</span><span class="s s-Atom">security</span><span class="o">/</span><span class="s s-Atom">certificates</span> <span class="s s-Atom">\</span>
                        <span class="o">-</span><span class="nn">cert</span><span class="p">:</span><span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">grid</span><span class="o">-</span><span class="s s-Atom">security</span><span class="o">/</span><span class="s s-Atom">xrootd</span><span class="o">/</span><span class="s s-Atom">xrootdcert</span><span class="p">.</span><span class="s s-Atom">pem</span> <span class="s s-Atom">\</span>
                        <span class="o">-</span><span class="nn">key</span><span class="p">:</span><span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">grid</span><span class="o">-</span><span class="s s-Atom">security</span><span class="o">/</span><span class="s s-Atom">xrootd</span><span class="o">/</span><span class="s s-Atom">xrootdkey</span><span class="p">.</span><span class="s s-Atom">pem</span> <span class="o">-</span><span class="nn">crl</span><span class="p">:</span><span class="mi">1</span> <span class="s s-Atom">\</span>
                        <span class="o">-</span><span class="nn">authzfun</span><span class="p">:</span><span class="s s-Atom">libXrdLcmaps</span><span class="p">.</span><span class="s s-Atom">so</span> <span class="o">-</span><span class="nn">authzfunparms</span><span class="p">:</span><span class="s s-Atom">--loglevel</span><span class="p">,</span><span class="mi">0</span> <span class="s s-Atom">\</span>
                        <span class="o">-</span><span class="nn">gmapopt</span><span class="p">:</span><span class="mi">10</span> <span class="o">-</span><span class="nn">gmapto</span><span class="p">:</span><span class="mi">0</span>
    <span class="s s-Atom">acc</span><span class="p">.</span><span class="s s-Atom">authdb</span> <span class="o">/</span><span class="s s-Atom">etc</span><span class="o">/</span><span class="s s-Atom">xrootd</span><span class="o">/</span><span class="s s-Atom">auth_file</span>
    <span class="s s-Atom">ofs</span><span class="p">.</span><span class="s s-Atom">authorize</span>
    <span class="s s-Atom">#</span> <span class="nv">ENABLE_SECURITY_END</span> <span class="c1"></span></span>
<span class="s s-Atom">fi</span>
</pre></div>


</li>
</ol>
</li>
<li>
<p>Restart the <a href="#using-xrootd">relevant services</a></p>
</li>
</ol>
<p>To verify the LCMAPS security, run the following commands from a machine with your user certificate/key pair,
<code>xrootd-client</code>, and <code>voms-clients-cpp</code> installed:</p>
<ol>
<li>
<p>Destroy any pre-existing proxies and attempt a copy to <code>&lt;DESTINATION PATH&gt;</code> on the <code>&lt;XROOTD HOST&gt;</code> to verify failure:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@client $</span> voms-proxy-destroy
<span class="gp">user@client $</span> xrdcp /bin/bash root://<span style="color:red">&lt;XROOTD HOST&gt;</span>/<span style="color:red">&lt;DESTINATION PATH&gt;</span>
<span class="go">180213 13:56:49 396570 cryptossl_X509CreateProxy: EEC certificate has expired</span>
<span class="go">[0B/0B][100%][==================================================][0B/s]</span>
<span class="go">Run: [FATAL] Auth failed</span>
</pre></div>


</li>
<li>
<p>On the XRootD host, add your DN to <a href="../../security/lcmaps-voms-authentication#mapping-users">/etc/grid-security/grid-mapfile</a></p>
</li>
<li>
<p>Generate your proxy and verify that you can successfully transfer files:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@client $</span> voms-proxy-init
<span class="gp">user@client $</span> xrdcp  /bin/sh root://<span style="color:red">&lt;XROOTD HOST&gt;</span>/<span style="color:red">&lt;DESTINATION PATH&gt;</span>
<span class="go">[938.1kB/938.1kB][100%][==================================================][938.1kB/s]</span>
</pre></div>


<p>If your transfer does not succeed, run the previous command with <code>--debug 2</code> for more information.</p>
</li>
</ol>
<h3 id="optional-adding-cms-tfc-support-to-xrootd-cms-sites-only">(Optional) Adding CMS TFC support to XRootD (CMS sites only)<a class="headerlink" href="#optional-adding-cms-tfc-support-to-xrootd-cms-sites-only" title="Permanent link">&para;</a></h3>
<p>For CMS users, there is a package available to integrate rule-based name lookup using a <code>storage.xml</code> file. 
If you are not setting up a CMS site, you can skip this section.</p>
<div class="codehilite"><pre><span></span><span class="go">yum install --enablerepo=osg-contrib xrootd-cmstfc</span>
</pre></div>


<p>You will need to add your <code>storage.xml</code> to <code>/etc/xrootd/storage.xml</code> and then add the following line to your XRootD
configuration:</p>
<div class="codehilite"><pre><span></span># Integrate with CMS TFC, placed in /etc/xrootd/storage.xml
oss.namelib /usr/lib64/libXrdCmsTfc.so file:/etc/xrootd/storage.xml%ORANGE%?protocol=hadoop</span>
</pre></div>


<p>Add the orange text only if you are running hadoop (see below).</p>
<p>See the CMS TWiki for more information:</p>
<ul>
<li><a href="https://twiki.cern.ch/twiki/bin/view/Main/XrootdTfcChanges">https://twiki.cern.ch/twiki/bin/view/Main/XrootdTfcChanges</a></li>
<li><a href="https://twiki.cern.ch/twiki/bin/view/Main/HdfsXrootdInstall">https://twiki.cern.ch/twiki/bin/view/Main/HdfsXrootdInstall</a></li>
</ul>
<h3 id="optional-adding-hadoop-support-to-xrootd">(Optional) Adding Hadoop support to XRootD<a class="headerlink" href="#optional-adding-hadoop-support-to-xrootd" title="Permanent link">&para;</a></h3>
<p>HDFS-based sites should utilize the <code>xrootd-hdfs</code> plugin to allow XRootD to access their storage.</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install xrootd-hdfs
</pre></div>


<p>You will then need to add the following lines to your
<code>/etc/xrootd/xrootd-clustered.cfg</code>:</p>
<div class="codehilite"><pre><span></span>xrootd.fslib /usr/lib64/libXrdOfs.so
ofs.osslib /usr/lib64/libXrdHdfs.so
</pre></div>


<p>For more information, see <a href="../install-hadoop">the HDFS installation documents</a>.</p>
<h3 id="optional-adding-file-residency-manager-frm-to-an-xrootd-cluster">(Optional) Adding File Residency Manager (FRM) to an XRootd cluster<a class="headerlink" href="#optional-adding-file-residency-manager-frm-to-an-xrootd-cluster" title="Permanent link">&para;</a></h3>
<p>If you have a multi-tiered storage system (e.g. some data is stored on SSDs and some on disks or tapes), then install
the File Residency Manager (FRM), so you can move data between tiers more easily. 
If you do not have a multi-tiered storage system, then you do not need FRM and you can skip this section.</p>
<p>The FRM deals with two major mechanisms:</p>
<ul>
<li>local disk</li>
<li>remote servers</li>
</ul>
<p>The description of fully functional multiple XRootD clusters is beyond the scope of this document. 
In order to have this fully functional system you will need a global redirector and at least one remote XRootD cluster
from where files could be moved to the local cluster.</p>
<p>Below are the modifications you should make in order to enable FRM on your local cluster:</p>
<ol>
<li>Make sure that FRM is enabled in <code>/etc/sysconfig/xrootd</code> on your data sever:</li>
</ol>
<div class="codehilite"><pre><span></span>ROOTD_USER=xrootd 
XROOTD_GROUP=xrootd 
XROOTD_DEFAULT_OPTIONS=&quot;-l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-clustered.cfg&quot; 
CMSD_DEFAULT_OPTIONS=&quot;-l /var/log/xrootd/cmsd.log -c /etc/xrootd/xrootd-clustered.cfg&quot; 
FRMD_DEFAULT_OPTIONS=&quot;-l /var/log/xrootd/frmd.log -c /etc/xrootd/xrootd-clustered.cfg&quot; 
XROOTD_INSTANCES=&quot;default&quot; 
CMSD_INSTANCES=&quot;default&quot; 
FRMD_INSTANCES=&quot;default&quot;
</pre></div>


<ol>
<li>Modify <code>/etc/xrootd/xrootd-clustered.cfg</code> on both nodes to specify options for <code>frm_xfrd</code> (File Transfer Daemon) and <code>frm_purged</code> (File Purging Daemon). For more information, you can visit the <a href="http://xrootd.org/doc/dev4/frm_config.htm">FRM Documentation</a></li>
<li>Start frm daemons on data server:</li>
</ol>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> service frm_xfrd start
<span class="gp">root@host #</span> service frm_purged start
</pre></div>


<h2 id="optional-installing-a-gridftp-server">(Optional) Installing a GridFTP Server<a class="headerlink" href="#optional-installing-a-gridftp-server" title="Permanent link">&para;</a></h2>
<p>The Globus GridFTP server can be installed alongside an XRootD storage element to provide GridFTP-based access to the
storage.</p>
<div class="admonition note">
<p class="admonition-title">See Also</p>
<p>OSG has extensive documentation on setting up a GridFTP server; this section is an
abbreviated version documenting the special steps needed for XRootD integration.
You may also find the following useful:</p>
<ul>
<li><a href="../gridftp">Basic GridFTP Install</a>.  Additionally covers service planning topics.</li>
<li><a href="../load-balanced-gridftp">Load-balanced GridFTP Install</a>.  Covers the creation of
    a load-balanced GridFTP service using multiple servers.</li>
</ul>
</div>
<p>Prior to following this installation guide, verify the host certificates and networking is configured correctly as in
the <a href="../gridftp">basic GridFTP install</a>.</p>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h3>
<p>GridFTP support for XRootD-based storage is provided by the <code>osg-gridftp-xrootd</code> meta-package:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> yum install osg-gridftp-xrootd
</pre></div>


<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<p>For information on how to configure authentication for your GridFTP installation, please refer to the <a href="../gridftp#configuring-authentication">configuring
authentication section of the GridFTP guide</a>.</p>
<p>Edit <code>/etc/sysconfig/xrootd-dsi</code> to set <code>XROOTD_VMP</code> to use your XRootD redirector.</p>
<div class="codehilite"><pre><span></span><span class="nb">export</span> <span class="nv">XROOTD_VMP</span><span class="o">=</span><span class="s2">&quot;<span style="color:red">redirector:1094:/local_path=/remote_path</span>&quot;</span>
</pre></div>


<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The syntax of <code>XROOTD_VMP</code> is tricky; make sure to use the following guidance:</p>
<ul>
<li><strong>Redirector</strong>: The hostname and domain of the local XRootD redirector server.</li>
<li><strong>local_path</strong>: The path exported by the GridFTP server.</li>
<li><strong>remote_path</strong>: The XRootD path that will be mounted at <strong>local_path</strong>.</li>
</ul>
</div>
<p>When <code>xrootd-dsi</code> is enabled, GridFTP configuration changes should go into <code>/etc/xrootd-dsi/gridftp-xrootd.conf</code>, not
<code>/etc/gridftp.conf</code>.<br />
Sites should review any customizations made in the latter and copy them as necessary.</p>
<p>You can use the FUSE mount in order to test POSIX access to xrootd in the GridFTP server.
You should be able to run Unix commands such as <code>ls /mnt/xrootd</code> and see the contents of the XRootD server.</p>
<p>For log / config file locations and system services to run, see the <a href="../gridftp">basic GridFTP install</a>.</p>
<h2 id="using-xrootd">Using XRootD<a class="headerlink" href="#using-xrootd" title="Permanent link">&para;</a></h2>
<h3 id="managing-xrootd-services">Managing XRootD services<a class="headerlink" href="#managing-xrootd-services" title="Permanent link">&para;</a></h3>
<p>Start services on the redirector node before starting any services on the data nodes. 
If you installed only XRootD itself, you will only need to start the <code>xrootd</code> service. 
However, if you installed cluster management services, you will need to start <code>cmsd</code> as well.</p>
<p>The instructions for starting and stopping an XRootD service depend on whether the service is installed on an EL 6 or EL
7 machine, and whether you are using a standalone or clustered configuration.</p>
<p>On EL 6, which config to use is set in the file <code>/etc/sysconfig/xrootd</code>. 
For example, to have <code>xrootd</code> use the clustered config, you would have a line such as this:</p>
<div class="codehilite"><pre><span></span>XROOTD_DEFAULT_OPTIONS=&quot;-l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-<span style="color:red">clustered</span>.cfg -k fifo&quot;
</pre></div>


<p>To use the standalone config instead, you would use:</p>
<div class="codehilite"><pre><span></span>XROOTD_DEFAULT_OPTIONS=&quot;-l /var/log/xrootd/xrootd.log -c /etc/xrootd/xrootd-<span style="color:red">standalone</span>.cfg -k fifo&quot;
</pre></div>


<p>On EL 7, which config to use is determined by the service name given to <code>systemctl</code>. 
For example, to have <code>xrootd</code> use the clustered config, you would start up <code>xrootd</code> with this line:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> systemctl start xrootd@<span style="color:red">clustered</span>
</pre></div>


<p>To use the standalone config instead, you would use:</p>
<div class="codehilite"><pre><span></span><span class="gp">root@host #</span> systemctl start xrootd@<span style="color:red">standalone</span>
</pre></div>


<p>The services are:</p>
<table>
<thead>
<tr>
<th align="left">Service</th>
<th align="left">EL 6 service name</th>
<th align="left">EL 7 service name</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">XRootD (standalone config)</td>
<td align="left"><code>xrootd</code></td>
<td align="left"><code>xrootd@standalone</code></td>
</tr>
<tr>
<td align="left">XRootD (clustered config)</td>
<td align="left"><code>xrootd</code></td>
<td align="left"><code>xrootd@clustered</code></td>
</tr>
<tr>
<td align="left">CMSD (clustered config)</td>
<td align="left"><code>cmsd</code></td>
<td align="left"><code>cmsd@clustered</code></td>
</tr>
</tbody>
</table>
<p>As a reminder, here are common service commands (all run as <code>root</code>):</p>
<table>
<thead>
<tr>
<th align="left">To …</th>
<th align="left">On EL 6, run the command…</th>
<th align="left">On EL 7, run the command…</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Start a service</td>
<td align="left"><code>service SERVICE-NAME start</code></td>
<td align="left"><code>systemctl start SERVICE-NAME</code></td>
</tr>
<tr>
<td align="left">Stop a service</td>
<td align="left"><code>service SERVICE-NAME stop</code></td>
<td align="left"><code>systemctl start SERVICE-NAME</code></td>
</tr>
<tr>
<td align="left">Enable a service to start during boot</td>
<td align="left"><code>chkconfig SERVICE-NAME on</code></td>
<td align="left"><code>systemctl enable SERVICE-NAME</code></td>
</tr>
<tr>
<td align="left">Disable a service from starting during boot</td>
<td align="left"><code>chkconfig SERVICE-NAME off</code></td>
<td align="left"><code>systemctl disable SERVICE-NAME</code></td>
</tr>
</tbody>
</table>
<h2 id="getting-help">Getting Help<a class="headerlink" href="#getting-help" title="Permanent link">&para;</a></h2>
<p>To get assistance. please use the <a href="../../common/help/">Help Procedure</a> page.</p>
<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h2>
<h3 id="file-locations">File locations<a class="headerlink" href="#file-locations" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th align="left">Service/Process</th>
<th align="left">Configuration File</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>xrootd</code></td>
<td align="left"><code>/etc/xrootd/xrootd-clustered.cfg</code></td>
<td align="left">Main clustered mode XRootD configuration</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><code>/etc/xrootd/auth_file</code></td>
<td align="left">Authorized users file</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="left">Service/Process</th>
<th align="left">Log File</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>xrootd</code></td>
<td align="left"><code>/var/log/xrootd/xrootd.log</code></td>
<td align="left">XRootD server daemon log</td>
</tr>
<tr>
<td align="left"><code>cmsd</code></td>
<td align="left"><code>/var/log/xrootd/cmsd.log</code></td>
<td align="left">Cluster management log</td>
</tr>
<tr>
<td align="left"><code>cns</code></td>
<td align="left"><code>/var/log/xrootd/cns/xrootd.log</code></td>
<td align="left">Server inventory (composite name space) log</td>
</tr>
<tr>
<td align="left"><code>frm_xfrd</code>, <code>frm_purged</code></td>
<td align="left"><code>/var/log/xrootd/frmd.log</code></td>
<td align="left">File Residency Manager log</td>
</tr>
</tbody>
</table>
<h2 id="links">Links<a class="headerlink" href="#links" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="http://xrootd.slac.stanford.edu/doc">XRootD documentation</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../xrootd-overview/" title="XRootD Overview" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                XRootD Overview
              </span>
            </div>
          </a>
        
        
          <a href="../install-xroot-client/" title="Using XRootD" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Using XRootD
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.30f6b8b1.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>